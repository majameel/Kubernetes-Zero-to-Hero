<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kubernetes Services & Ingress - Complete Guide</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background: white;
            margin-top: 20px;
            margin-bottom: 20px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .header {
            text-align: center;
            padding: 40px 0;
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 3.2em;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.3em;
            opacity: 0.9;
        }

        .section {
            margin-bottom: 40px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 6px solid #3498db;
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 25px;
            font-size: 2em;
            border-bottom: 3px solid #3498db;
            padding-bottom: 12px;
        }

        .section h3 {
            color: #34495e;
            margin: 25px 0 18px 0;
            font-size: 1.5em;
        }

        .section h4 {
            color: #2c3e50;
            margin: 20px 0 15px 0;
            font-size: 1.2em;
        }

        .service-types {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin: 25px 0;
        }

        .service-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            border-top: 5px solid;
        }

        .clusterip { border-top-color: #e74c3c; }
        .nodeport { border-top-color: #f39c12; }
        .loadbalancer { border-top-color: #27ae60; }

        .architecture-diagram {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 30px;
            margin: 30px 0;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .diagram-row {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
            flex-wrap: wrap;
            gap: 15px;
        }

        .diagram-element {
            padding: 15px 25px;
            border-radius: 10px;
            font-weight: bold;
            text-align: center;
            min-width: 120px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .client { background: #ffd6cc; border: 2px solid #ff6b35; color: #d63031; }
        .ingress { background: #d4edda; border: 2px solid #28a745; color: #00b894; }
        .service { background: #cce5ff; border: 2px solid #007bff; color: #0984e3; }
        .pod { background: #fff3cd; border: 2px solid #ffc107; color: #fdcb6e; }
        .node { background: #e8f5e8; border: 2px solid #28a745; color: #00b894; }
        .external { background: #f8d7da; border: 2px solid #dc3545; color: #e17055; }

        .arrow {
            font-size: 2em;
            color: #666;
            margin: 0 10px;
        }

        .vertical-arrow {
            font-size: 2em;
            color: #666;
            transform: rotate(90deg);
            margin: 10px 0;
        }

        .flow-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }

        .flow-column {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .problem-box {
            background: #fff5f5;
            border: 2px solid #e53e3e;
            border-radius: 10px;
            padding: 25px;
            margin: 25px 0;
        }

        .solution-box {
            background: #f0fff4;
            border: 2px solid #38a169;
            border-radius: 10px;
            padding: 25px;
            margin: 25px 0;
        }

        .info-box {
            background: #ebf8ff;
            border: 2px solid #3182ce;
            border-radius: 10px;
            padding: 25px;
            margin: 25px 0;
        }

        .warning-box {
            background: #fffbeb;
            border: 2px solid #f59e0b;
            border-radius: 10px;
            padding: 25px;
            margin: 25px 0;
        }

        pre {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            font-size: 14px;
            line-height: 1.4;
        }

        .command-block {
            background: #1a202c;
            color: #68d391;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #68d391;
            font-family: 'Courier New', monospace;
        }

        .yaml-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #4299e1;
        }

        .tls-comparison {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .tls-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            border-top: 5px solid;
        }

        .passthrough { border-top-color: #f39c12; }
        .offloading { border-top-color: #e74c3c; }
        .bridging { border-top-color: #27ae60; }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 25px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .comparison-table th,
        .comparison-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }

        .comparison-table th {
            background: #3498db;
            color: white;
            font-weight: bold;
        }

        .comparison-table tr:nth-child(even) {
            background: #f8f9fa;
        }

        .nav-menu {
            position: sticky;
            top: 20px;
            background: #2c3e50;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            z-index: 100;
        }

        .nav-menu ul {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }

        .nav-menu a {
            color: white;
            text-decoration: none;
            padding: 10px 18px;
            border-radius: 6px;
            transition: background 0.3s;
            font-weight: 500;
        }

        .nav-menu a:hover {
            background: #34495e;
        }

        .demo-steps {
            counter-reset: step-counter;
        }

        .demo-step {
            counter-increment: step-counter;
            background: white;
            padding: 25px;
            margin: 20px 0;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border-left: 5px solid #3498db;
            position: relative;
        }

        .demo-step::before {
            content: counter(step-counter);
            position: absolute;
            left: -15px;
            top: 20px;
            background: #3498db;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        .feature-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border-top: 4px solid #3498db;
        }

        .highlight {
            background: #fff3cd;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            color: #856404;
        }

        .code-inline {
            background: #f1f3f4;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            color: #d63031;
            font-size: 0.9em;
        }

        .routing-demo {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin: 25px 0;
            border: 2px solid #dee2e6;
        }

        .tls-flow {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            margin: 20px 0;
        }

        .vs-comparison {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 20px;
            align-items: center;
            margin: 30px 0;
        }

        .vs-divider {
            background: #e74c3c;
            color: white;
            padding: 15px;
            border-radius: 50%;
            font-weight: bold;
            font-size: 1.2em;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                padding: 15px;
            }

            .header h1 {
                font-size: 2.2em;
            }

            .flow-comparison {
                grid-template-columns: 1fr;
            }

            .vs-comparison {
                grid-template-columns: 1fr;
            }

            .diagram-row {
                flex-direction: column;
            }

            .nav-menu ul {
                flex-direction: column;
                gap: 10px;
            }

            .service-types {
                grid-template-columns: 1fr;
            }

            .tls-comparison {
                grid-template-columns: 1fr;
            }
        }

        .success {
            color: #27ae60;
            font-weight: bold;
        }

        .error {
            color: #e74c3c;
            font-weight: bold;
        }

        .important {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🌐 Kubernetes Services & Ingress</h1>
            <p>Complete Guide - From Basic Services to Advanced Ingress</p>
        </div>

        <nav class="nav-menu">
            <ul>
                <li><a href="#services">Services</a></li>
                <li><a href="#service-types">Service Types</a></li>
                <li><a href="#why-ingress">Why Ingress</a></li>
                <li><a href="#ingress-concepts">Ingress Concepts</a></li>
                <li><a href="#routing">Routing Examples</a></li>
                <li><a href="#tls">TLS Security</a></li>
                <li><a href="#openshift">OpenShift vs K8s</a></li>
            </ul>
        </nav>

        <section id="services" class="section">
            <h2>📡 Kubernetes Services Fundamentals</h2>
            
            <div class="info-box">
                <h3>What is a Kubernetes Service?</h3>
                <p>A Kubernetes Service is an <strong>abstract way of exposing an application running as pods</strong>.</p>
            </div>

            <div class="architecture-diagram">
                <h4>🔄 The Dynamic IP Problem</h4>
                <div class="diagram-row">
                    <div class="diagram-element pod">Checkout Pod<br/>IP: 172.16.1.15</div>
                    <span class="arrow">→</span>
                    <div class="diagram-element pod">Payments Pod<br/>IP: 172.16.1.23</div>
                </div>
                <div style="margin: 20px 0; color: #e74c3c; font-weight: bold;">
                    ❌ Problem: Pod IPs are dynamic!
                </div>
                <div class="diagram-row">
                    <div class="diagram-element pod">Checkout Pod<br/>IP: 172.16.1.15</div>
                    <span class="arrow">→</span>
                    <div class="diagram-element error" style="background: #ffebee;">Payments Pod<br/>NEW IP: 172.16.1.45<br/>404 Error!</div>
                </div>
            </div>

            <div class="solution-box">
                <h3>✅ Solution: Services as Proxy</h3>
                <div class="architecture-diagram">
                    <div class="diagram-row">
                        <div class="diagram-element pod">Checkout Pod</div>
                        <span class="arrow">→</span>
                        <div class="diagram-element service">Service<br/>(Stable IP)</div>
                        <span class="arrow">→</span>
                        <div class="diagram-element pod">Payments Pod<br/>(Any IP)</div>
                    </div>
                    <p style="margin-top: 15px; color: #27ae60; font-weight: bold;">
                        ✅ Services use labels and selectors to identify pods
                    </p>
                </div>
            </div>
        </section>

        <section id="service-types" class="section">
            <h2>🎯 Service Types Deep Dive</h2>

            <div class="service-types">
                <div class="service-card clusterip">
                    <h3>🔒 ClusterIP</h3>
                    <p><strong>Internal cluster communication only</strong></p>
                    <ul>
                        <li>Service IP stays within cluster</li>
                        <li>Not accessible from outside</li>
                        <li>Default service type</li>
                        <li>Used for internal microservices</li>
                    </ul>
                    
                    <div class="architecture-diagram">
                        <div class="diagram-row">
                            <div class="diagram-element external">External User</div>
                            <span class="arrow" style="color: #e74c3c;">❌</span>
                            <div class="diagram-element service">ClusterIP Service</div>
                            <span class="arrow">→</span>
                            <div class="diagram-element pod">Pod</div>
                        </div>
                    </div>
                </div>

                <div class="service-card nodeport">
                    <h3>🚪 NodePort</h3>
                    <p><strong>Access from outside via Node IP</strong></p>
                    <ul>
                        <li>Allocates port from 32000-32767 range</li>
                        <li>kube-proxy updates iptables rules</li>
                        <li>Available on all cluster nodes</li>
                    </ul>

                    <div class="architecture-diagram">
                        <div class="diagram-row">
                            <div class="diagram-element external">External User</div>
                            <span class="arrow">→</span>
                            <div class="diagram-element node">Node IP:32001</div>
                            <span class="arrow">→</span>
                            <div class="diagram-element service">Service</div>
                            <span class="arrow">→</span>
                            <div class="diagram-element pod">Pod</div>
                        </div>
                    </div>

                    <div class="warning-box">
                        <h4>⚠️ NodePort Drawbacks:</h4>
                        <ul>
                            <li>Nodes might not be accessible externally</li>
                            <li>Random port allocation (32000s)</li>
                            <li>Security concerns with wide port ranges</li>
                        </ul>
                    </div>
                </div>

                <div class="service-card loadbalancer">
                    <h3>⚖️ LoadBalancer</h3>
                    <p><strong>External IP via cloud provider</strong></p>
                    <ul>
                        <li>Creates external static IP</li>
                        <li>Available in 2-3 minutes</li>
                        <li>Works with cloud providers (AWS, Azure, GCP)</li>
                        <li>MetalLB for bare metal</li>
                    </ul>

                    <div class="architecture-diagram">
                        <div class="diagram-row">
                            <div class="diagram-element external">External User</div>
                            <span class="arrow">→</span>
                            <div class="diagram-element external">External IP<br/>(Static)</div>
                            <span class="arrow">→</span>
                            <div class="diagram-element service">Service</div>
                            <span class="arrow">→</span>
                            <div class="diagram-element pod">Pod</div>
                        </div>
                    </div>

                    <div class="info-box">
                        <h4>💡 MetalLB for Bare Metal</h4>
                        <p>CNCF project that enables LoadBalancer services on bare metal clusters (requires configuration)</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="why-ingress" class="section">
            <h2>🤔 Why Use Ingress?</h2>

            <div class="problem-box">
                <h3>💰 Problem 1: Cost</h3>
                <p>Large applications need many external services:</p>
                
                <div class="architecture-diagram">
                    <h4>❌ Expensive: Multiple LoadBalancers</h4>
                    <div class="diagram-row">
                        <div class="diagram-element external">Service 1<br/>💰 External IP #1</div>
                        <div class="diagram-element external">Service 2<br/>💰 External IP #2</div>
                        <div class="diagram-element external">Service N<br/>💰 External IP #N</div>
                    </div>
                    <p style="color: #e74c3c; font-weight: bold; margin-top: 15px;">
                        200-300 services = 200-300 static IPs = 💸💸💸 HUGE COSTS!
                    </p>
                </div>
            </div>

            <div class="problem-box">
                <h3>🎯 Problem 2: Limited Routing</h3>
                <p>LoadBalancer services lack advanced routing capabilities:</p>
                <ul>
                    <li>No host-based routing (<code class="code-inline">food.example.com</code>)</li>
                    <li>No path-based routing (<code class="code-inline">/api</code>, <code class="code-inline">/web</code>)</li>
                    <li>No session-based routing</li>
                    <li>Limited WAF capabilities</li>
                </ul>
            </div>

            <div class="solution-box">
                <h3>✅ Solution: Ingress</h3>
                <div class="architecture-diagram">
                    <h4>✅ Cost-Effective: Single Entry Point</h4>
                    <div class="diagram-row">
                        <div class="diagram-element external">Single Ingress<br/>💰 1 External IP</div>
                        <span class="arrow">→</span>
                        <div style="display: flex; flex-direction: column; gap: 10px;">
                            <div class="diagram-element service">Service 1</div>
                            <div class="diagram-element service">Service 2</div>
                            <div class="diagram-element service">Service N</div>
                        </div>
                    </div>
                    <p style="color: #27ae60; font-weight: bold; margin-top: 15px;">
                        ✅ Route by host, path, headers → Multiple services
                    </p>
                </div>
            </div>
        </section>

        <section id="ingress-concepts" class="section">
            <h2>🏗️ Ingress Concepts</h2>

            <div class="vs-comparison">
                <div class="flow-column">
                    <h3>📄 Ingress Resource</h3>
                    <ul>
                        <li><strong>Defines routing rules</strong></li>
                        <li>Created via YAML manifest</li>
                        <li>Specifies hosts, paths, backends</li>
                        <li>Does nothing without Controller</li>
                    </ul>
                    
                    <div class="yaml-block">
<pre>apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: example-ingress
spec:
  rules:
  - host: food.bar.com
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: my-service
            port:
              number: 80</pre>
                    </div>
                </div>

                <div class="vs-divider">VS</div>

                <div class="flow-column">
                    <h3>⚙️ Ingress Controller</h3>
                    <ul>
                        <li><strong>Implements the logic</strong></li>
                        <li>Runs as pods in cluster</li>
                        <li>Watches Ingress resources</li>
                        <li>Configures load balancer</li>
                    </ul>

                    <div class="feature-grid">
                        <div class="feature-card">
                            <h4>Popular Controllers</h4>
                            <ul>
                                <li>Nginx Ingress</li>
                                <li>HAProxy Ingress</li>
                                <li>F5 BIG-IP</li>
                                <li>Ambassador</li>
                                <li>Traefik</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="architecture-diagram">
                <h4>🔄 How Ingress Works</h4>
                <div style="display: flex; flex-direction: column; align-items: center; gap: 20px;">
                    <div class="diagram-element client">Client Request<br/>food.bar.com/api</div>
                    <span class="vertical-arrow">↓</span>
                    <div class="diagram-element ingress">Ingress Controller<br/>(Nginx/HAProxy)</div>
                    <span class="vertical-arrow">↓</span>
                    <div class="diagram-element service">Matches Rules<br/>Routes to Service</div>
                    <span class="vertical-arrow">↓</span>
                    <div class="diagram-element pod">Application Pods</div>
                </div>
            </div>

            <div class="info-box">
                <h3>🏷️ Ingress Classes</h3>
                <p>Use multiple Ingress Controllers in the same cluster:</p>
                <div class="yaml-block">
<pre>apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: my-ingress
spec:
  ingressClassName: nginx  # Specify which controller
  rules:
  # ... rules here</pre>
                </div>
            </div>
        </section>

        <section id="routing" class="section">
            <h2>🛣️ Ingress Routing Examples</h2>

            <div class="demo-steps">
                <div class="demo-step">
                    <h3>🌐 Host-Based Routing</h3>
                    <p>Route traffic based on hostname in request:</p>
                    
                    <div class="yaml-block">
<pre>apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: host-based-ingress
spec:
  rules:
  - host: food.bar.com
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: http-svc
            port:
              number: 80</pre>
                    </div>

                    <div class="routing-demo">
                        <h4>🧪 Demo Commands:</h4>
                        <div class="command-block">
<pre># This fails - no Host header
curl &lt;Ingress_IP&gt;
# Result: 404 - Host not found

# This works - correct Host header
curl -H "Host: food.bar.com" &lt;Ingress_IP&gt;
# Result: Success! Routes to http-svc</pre>
                        </div>
                    </div>
                </div>

                <div class="demo-step">
                    <h3>📁 Path-Based Routing</h3>
                    <p>Route traffic based on URL path:</p>
                    
                    <div class="yaml-block">
<pre>apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: path-based-ingress
spec:
  rules:
  - host: food.bar.com
    http:
      paths:
      - path: /first
        pathType: Prefix
        backend:
          service:
            name: http-svc
            port:
              number: 80
      - path: /second
        pathType: Prefix
        backend:
          service:
            name: miyab-svc
            port:
              number: 80</pre>
                    </div>

                    <div class="routing-demo">
                        <h4>🧪 Demo Commands:</h4>
                        <div class="command-block">
<pre># No path - fails
curl -H "Host: food.bar.com" &lt;Ingress_IP&gt;
# Result: 404

# Correct path - works
curl -H "Host: food.bar.com" &lt;Ingress_IP&gt;/second
# Result: Routes to miyab-svc

curl -H "Host: food.bar.com" &lt;Ingress_IP&gt;/first
# Result: Routes to http-svc</pre>
                        </div>
                    </div>

                    <div class="info-box">
                        <h4>🔍 Debugging Tip</h4>
                        <p>Check the Ingress Controller's config file:</p>
                        <ul>
                            <li><strong>Nginx:</strong> <code class="code-inline">nginx.conf</code></li>
                            <li><strong>HAProxy:</strong> <code class="code-inline">haproxy.conf</code></li>
                        </ul>
                    </div>
                </div>

                <div class="demo-step">
                    <h3>🌟 Wildcard Hosts</h3>
                    <p>Handle multiple subdomains with single rule:</p>
                    
                    <div class="yaml-block">
<pre>apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: wildcard-ingress
spec:
  rules:
  - host: "*.bar.com"  # Use quotes for wildcards!
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: http-svc
            port:
              number: 80</pre>
                    </div>

                    <div class="routing-demo">
                        <h4>🧪 Demo Commands:</h4>
                        <div class="command-block">
<pre># Both work with wildcard
curl -H "Host: food.bar.com" &lt;Ingress_IP&gt;
curl -H "Host: example.bar.com" &lt;Ingress_IP&gt;
curl -H "Host: anything.bar.com" &lt;Ingress_IP&gt;
# All route to http-svc</pre>
                        </div>
                    </div>
                </div>

                <div class="demo-step">
                    <h3>🔐 Basic Authentication</h3>
                    <p>Add authentication using annotations:</p>
                    
                    <div class="yaml-block">
<pre>apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: auth-ingress
  annotations:
    nginx.ingress.kubernetes.io/auth-type: basic
    nginx.ingress.kubernetes.io/auth-secret: basic-auth
    nginx.ingress.kubernetes.io/auth-realm: 'Authentication Required'
spec:
  rules:
  - host: secure.bar.com
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: http-svc
            port:
              number: 80</pre>
                    </div>

                    <div class="info-box">
                        <p>Create auth secret with htpasswd:</p>
                        <div class="command-block">
<pre>htpasswd -c auth admin
kubectl create secret generic basic-auth --from-file=auth</pre>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="tls" class="section">
            <h2>🔒 TLS Security with Ingress</h2>

            <div class="tls-comparison">
                <div class="tls-card passthrough">
                    <h3>🚪 SSL Passthrough</h3>
                    <div class="tls-flow">
                        <div class="diagram-element client">Client (HTTPS)</div>
                        <span class="vertical-arrow">↓</span>
                        <div class="diagram-element ingress">Load Balancer<br/>(Pass-through)</div>
                        <span class="vertical-arrow">↓</span>
                        <div class="diagram-element service">Service (HTTPS)</div>
                    </div>
                    
                    <h4>✅ Advantages:</h4>
                    <ul>
                        <li>End-to-end encryption</li>
                        <li>No decryption at LB</li>
                    </ul>
                    
                    <h4>❌ Disadvantages:</h4>
                    <ul>
                        <li>No L7 features (path routing, WAF)</li>
                        <li>Service handles decryption load</li>
                        <li>Higher latency during high traffic</li>
                        <li>Security risk - no packet inspection</li>
                    </ul>

                    <div class="warning-box">
                        <strong>🎯 Use Case:</strong> Only for L4 load balancing needs
                    </div>
                </div>

                <div class="tls-card offloading">
                    <h3>📤 SSL Offloading</h3>
                    <div class="tls-flow">
                        <div class="diagram-element client">Client (HTTPS)</div>
                        <span class="vertical-arrow">↓</span>
                        <div class="diagram-element ingress">Load Balancer<br/>(Decrypt)</div>
                        <span class="vertical-arrow">↓</span>
                        <div class="diagram-element service">Service (HTTP)</div>
                    </div>
                    
                    <h4>✅ Advantages:</h4>
                    <ul>
                        <li>Reduces service CPU load</li>
                        <li>Lower application latency</li>
                        <li>Full L7 features available</li>
                        <li>WAF and routing work</li>
                    </ul>
                    
                    <h4>❌ Disadvantages:</h4>
                    <ul>
                        <li><strong>MAJOR SECURITY RISK</strong></li>
                        <li>Unencrypted LB → Service traffic</li>
                        <li>Man-in-the-middle attack risk</li>
                        <li>Internal network exposure</li>
                    </ul>

                    <div class="problem-box">
                        <strong>⚠️ NOT RECOMMENDED</strong> for security-critical applications
                    </div>
                </div>

                <div class="tls-card bridging">
                    <h3>🌉 SSL Bridging (Re-encrypt)</h3>
                    <div class="tls-flow">
                        <div class="diagram-element client">Client (HTTPS)</div>
                        <span class="vertical-arrow">↓</span>
                        <div class="diagram-element ingress">Load Balancer<br/>(Decrypt + Re-encrypt)</div>
                        <span class="vertical-arrow">↓</span>
                        <div class="diagram-element service">Service (HTTPS)</div>
                    </div>
                    
                    <h4>✅ Advantages:</h4>
                    <ul>
                        <li>End-to-end encryption</li>
                        <li>Full L7 features available</li>
                        <li>Packet inspection possible</li>
                        <li>WAF protection</li>
                        <li>Security + functionality</li>
                    </ul>
                    
                    <h4>❌ Disadvantages:</h4>
                    <ul>
                        <li>Service still handles decryption</li>
                        <li>Some latency impact</li>
                        <li>More complex setup</li>
                    </ul>

                    <div class="solution-box">
                        <strong>🎯 RECOMMENDED</strong> for production applications
                    </div>
                </div>
            </div>

            <h3>🔑 TLS Certificate Handling</h3>
            
            <div class="info-box">
                <h4>Store Certificates in Kubernetes Secrets</h4>
                <div class="command-block">
<pre># Create TLS secret
kubectl create secret tls food-bar-tls-secret \
  --cert=path/to/cert.crt \
  --key=path/to/cert.key</pre>
                </div>
            </div>

            <div class="yaml-block">
<pre>apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: secure-ingress
spec:
  tls:
  - hosts:
    - food.bar.com
    secretName: food-bar-tls-secret  # Reference to TLS secret
  rules:
  - host: food.bar.com
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: http-svc
            port:
              number: 80</pre>
            </div>

            <div class="routing-demo">
                <h4>🧪 Secure Access Demo:</h4>
                <div class="command-block">
<pre># Fails without certificates
curl -H "Host: food.bar.com" &lt;Ingress_IP&gt;
# Result: Connection requires TLS

# Works with certificates
curl --cacert ca.crt --cert client.crt --key client.key \
     -H "Host: food.bar.com" https://&lt;Ingress_IP&gt;
# Result: Secure access successful</pre>
                </div>
            </div>
        </section>

        <section id="openshift" class="section">
            <h2>🔄 OpenShift Routes vs Kubernetes Ingress</h2>

            <div class="comparison-table">
                <table>
                    <thead>
                        <tr>
                            <th>Feature</th>
                            <th>Kubernetes Ingress</th>
                            <th>OpenShift Routes</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>TLS Passthrough</strong></td>
                            <td>SSL Passthrough</td>
                            <td>Passthrough Termination</td>
                        </tr>
                        <tr>
                            <td><strong>TLS Offloading</strong></td>
                            <td>SSL Offloading</td>
                            <td>Edge Termination</td>
                        </tr>
                        <tr>
                            <td><strong>TLS Bridging</strong></td>
                            <td>SSL Bridging</td>
                            <td>Re-encrypt Termination</td>
                        </tr>
                        <tr>
                            <td><strong>Certificate Storage</strong></td>
                            <td>✅ Kubernetes Secrets</td>
                            <td>❌ Inline in Route (HAProxy)</td>
                        </tr>
                        <tr>
                            <td><strong>Git Storage</strong></td>
                            <td>✅ Safe for Git</td>
                            <td>⚠️ Contains sensitive data</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="problem-box">
                <h3>❌ OpenShift Routes Limitation</h3>
                <p>HAProxy-based Routes cannot store TLS certificates in Secrets:</p>
                <div class="yaml-block">
<pre># OpenShift Route - certificates inline (not recommended)
apiVersion: route.openshift.io/v1
kind: Route
metadata:
  name: secure-route
spec:
  host: app.example.com
  tls:
    termination: edge
    certificate: |  # Certificate data directly here - not secure!
      -----BEGIN CERTIFICATE-----
      MIIDXTCCAkWgAwIBAgIJAKZ...
      -----END CERTIFICATE-----
    key: |
      -----BEGIN PRIVATE KEY-----
      MIIEvQIBADANBgkqhkiG9w0...
      -----END PRIVATE KEY-----</pre>
                </div>
            </div>

            <div class="solution-box">
                <h3>✅ Workaround: Use Ingress on OpenShift</h3>
                <p>Many customers use Kubernetes Ingress even on OpenShift for better secret management:</p>
                <div class="yaml-block">
<pre># Use Ingress on OpenShift for better certificate management
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: openshift-ingress
spec:
  tls:
  - hosts:
    - app.example.com
    secretName: app-tls-secret  # Much better!
  rules:
  - host: app.example.com
    # ... rest of configuration</pre>
                </div>
            </div>

            <div class="info-box">
                <h3>🔐 OpenShift Service Serving Certificates</h3>
                <p>Automatic certificate generation for internal services:</p>
                <div class="yaml-block">
<pre>apiVersion: v1
kind: Service
metadata:
  name: my-service
  annotations:
    service.beta.openshift.io/serving-cert-secret-name: my-service-tls
spec:
  # Service configuration
  # OpenShift automatically creates 'my-service-tls' secret</pre>
                </div>
            </div>
        </section>

        <section class="section">
            <h2>🔧 Multiple Controller Implementations</h2>

            <div class="info-box">
                <h3>Why So Many Controllers?</h3>
                <ul>
                    <li><strong>Competition:</strong> Each vendor believes their solution is superior</li>
                    <li><strong>Specialization:</strong> Different use cases need different features</li>
                    <li><strong>Innovation:</strong> Drive improvements and new capabilities</li>
                </ul>
            </div>

            <div class="feature-grid">
                <div class="feature-card">
                    <h4>🌐 Nginx Ingress</h4>
                    <ul>
                        <li>Most popular</li>
                        <li>Great performance</li>
                        <li>Extensive features</li>
                        <li>Strong community</li>
                    </ul>
                </div>
                
                <div class="feature-card">
                    <h4>⚖️ HAProxy Ingress</h4>
                    <ul>
                        <li>Enterprise-grade</li>
                        <li>Advanced load balancing</li>
                        <li>High availability</li>
                        <li>Detailed metrics</li>
                    </ul>
                </div>
                
                <div class="feature-card">
                    <h4>🚀 Traefik</h4>
                    <ul>
                        <li>Modern design</li>
                        <li>Auto-discovery</li>
                        <li>Built-in dashboard</li>
                        <li>Microservices-focused</li>
                    </ul>
                </div>
                
                <div class="feature-card">
                    <h4>🛡️ Ambassador</h4>
                    <ul>
                        <li>API Gateway features</li>
                        <li>Advanced security</li>
                        <li>Rate limiting</li>
                        <li>Developer-friendly</li>
                    </ul>
                </div>
            </div>

            <div class="warning-box">
                <h3>⚡ Modern Extensions</h3>
                <p>Many controllers extend beyond standard Ingress with Custom Resource Definitions (CRDs):</p>
                <ul>
                    <li><strong>IngressRoute</strong> (Traefik)</li>
                    <li><strong>VirtualService</strong> (Istio)</li>
                    <li><strong>HTTPRoute</strong> (Gateway API)</li>
                </ul>
                <p>These provide more flexibility than the standard Ingress resource.</p>
            </div>
        </section>

        <section class="section">
            <h2>📚 Quick Reference</h2>

            <div class="feature-grid">
                <div class="feature-card">
                    <h4>🔍 Essential Commands</h4>
                    <div class="command-block">
<pre># View services
kubectl get svc

# View ingress
kubectl get ingress

# Describe ingress
kubectl describe ingress &lt;name&gt;

# View ingress controller logs
kubectl logs -n ingress-nginx &lt;controller-pod&gt;</pre>
                    </div>
                </div>

                <div class="feature-card">
                    <h4>🧪 Testing Commands</h4>
                    <div class="command-block">
<pre># Test with host header
curl -H "Host: example.com" &lt;ingress-ip&gt;

# Test with path
curl -H "Host: example.com" &lt;ingress-ip&gt;/api

# Test TLS
curl -k https://example.com</pre>
                    </div>
                </div>

                <div class="feature-card">
                    <h4>🔑 TLS Secret Creation</h4>
                    <div class="command-block">
<pre># Create TLS secret
kubectl create secret tls my-tls-secret \
  --cert=cert.crt \
  --key=cert.key

# From existing files
kubectl create secret tls my-tls-secret \
  --cert=path/to/tls.crt \
  --key=path/to/tls.key</pre>
                    </div>
                </div>

                <div class="feature-card">
                    <h4>📋 Path Types</h4>
                    <ul>
                        <li><strong>Exact:</strong> Must match exactly</li>
                        <li><strong>Prefix:</strong> Matches prefix</li>
                        <li><strong>ImplementationSpecific:</strong> Controller-specific</li>
                    </ul>
                </div>
            </div>
        </section>

        <div style="text-align: center; padding: 40px; background: linear-gradient(135deg, #2c3e50, #34495e); color: white; border-radius: 10px; margin-top: 40px;">
            <h3>🎯 Kubernetes Services & Ingress Mastery</h3>
            <p style="font-size: 1.1em; margin: 15px 0;">From basic Services to advanced Ingress routing and TLS security</p>
            <p style="font-size: 0.9em; opacity: 0.8;">Complete guide with practical examples and best practices</p>
        </div>
    </div>
</body>
</html>