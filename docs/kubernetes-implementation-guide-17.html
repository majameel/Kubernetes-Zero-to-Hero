<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kubernetes Implementation Guide: From Scratch to Production</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f7fa;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, #326ce5 0%, #1e4fb3 100%);
            color: white;
            padding: 40px 0;
            text-align: center;
            margin-bottom: 40px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .level-section {
            background: white;
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .level-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 3px solid #326ce5;
        }
        
        .level-number {
            background: #326ce5;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            font-weight: bold;
            margin-right: 20px;
        }
        
        h2 {
            color: #1e4fb3;
            font-size: 2em;
        }
        
        h3 {
            color: #326ce5;
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 1.4em;
        }
        
        .diagram {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        
        .flow-diagram {
            display: flex;
            justify-content: space-around;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
            margin: 20px 0;
        }
        
        .flow-item {
            background: #e3f2fd;
            border: 2px solid #326ce5;
            border-radius: 8px;
            padding: 15px 25px;
            font-weight: 500;
            position: relative;
        }
        
        .arrow {
            font-size: 2em;
            color: #326ce5;
        }
        
        pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
        }
        
        code {
            background: #f1f3f5;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            color: #e83e8c;
        }
        
        .table-container {
            overflow-x: auto;
            margin: 20px 0;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        th {
            background: #326ce5;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
        }
        
        td {
            padding: 12px;
            border-bottom: 1px solid #e9ecef;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        .highlight-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        
        .important {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        
        .success-box {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        
        ul, ol {
            margin-left: 30px;
            margin-bottom: 15px;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        .architecture-diagram {
            background: white;
            border: 2px solid #326ce5;
            border-radius: 10px;
            padding: 30px;
            margin: 20px 0;
            text-align: center;
        }
        
        .cluster-visualization {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .node-box {
            background: #e8f5e9;
            border: 2px solid #4caf50;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }
        
        .pod-box {
            background: #fff3e0;
            border: 1px solid #ff9800;
            border-radius: 4px;
            padding: 10px;
            margin-top: 10px;
            font-size: 0.9em;
        }
        
        .timeline {
            position: relative;
            padding: 20px 0;
        }
        
        .timeline-item {
            background: #f8f9fa;
            border-left: 3px solid #326ce5;
            margin-left: 20px;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 0 8px 8px 0;
        }
        
        .badge {
            display: inline-block;
            padding: 4px 8px;
            background: #326ce5;
            color: white;
            border-radius: 4px;
            font-size: 0.85em;
            font-weight: 500;
        }
        
        .badge.critical {
            background: #dc3545;
        }
        
        .badge.important {
            background: #ff9800;
        }
        
        .badge.medium {
            background: #ffc107;
            color: #333;
        }
        
        .badge.low {
            background: #28a745;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>üöÄ Kubernetes Implementation Guide</h1>
            <p class="subtitle">Complete Journey from Scratch to Production</p>
        </div>
    </header>

    <div class="container">
        <!-- Introduction -->
        <div class="level-section">
            <h2>üìã Introduction</h2>
            <p>This comprehensive guide covers the complete process of implementing Kubernetes from scratch to production. We'll walk through a real-world scenario where you're tasked with migrating a microservices architecture from Docker Compose on VMs to a full Kubernetes implementation.</p>
            
            <div class="highlight-box">
                <strong>üéØ Scenario:</strong> You join as a DevOps engineer. The company uses microservices with Docker Compose on VMs. Your mission: Design and implement a complete Kubernetes solution including dev, staging, and production environments.
            </div>

            <div class="architecture-diagram">
                <h3>Current Architecture</h3>
                <div class="flow-diagram">
                    <div class="flow-item">Microservices</div>
                    <span class="arrow">‚Üí</span>
                    <div class="flow-item">Docker Compose</div>
                    <span class="arrow">‚Üí</span>
                    <div class="flow-item">Virtual Machines</div>
                    <span class="arrow">‚Üí</span>
                    <div class="flow-item">Load Balancer</div>
                    <span class="arrow">‚Üí</span>
                    <div class="flow-item">Customers</div>
                </div>
            </div>

            <div class="important">
                <strong>‚ö†Ô∏è Common Mistake:</strong> Don't jump directly to creating a Kubernetes cluster! Follow the systematic 6-level approach outlined in this guide.
            </div>
        </div>

        <!-- Level 0: Requirement Gathering -->
        <div class="level-section">
            <div class="level-header">
                <div class="level-number">0</div>
                <h2>Requirement Gathering</h2>
            </div>

            <p>The foundation of successful Kubernetes implementation starts with thorough requirement gathering. This phase typically takes 1-2 weeks but saves months of rework later.</p>

            <h3>Step 1: List All Microservices</h3>
            <p>Identify and document every microservice in your application ecosystem.</p>
            
            <div class="diagram">
                <h4>Example: E-commerce Application Microservices</h4>
                <div class="flow-diagram">
                    <div class="flow-item">UI Service</div>
                    <div class="flow-item">Payment Service</div>
                    <div class="flow-item">Transaction Service</div>
                    <div class="flow-item">Shipping Service</div>
                    <div class="flow-item">Inventory Service</div>
                    <div class="flow-item">User Service</div>
                </div>
            </div>

            <h3>Step 2: Identify Teams</h3>
            <p>Map microservices to their respective development teams. This is crucial for namespace design and RBAC implementation.</p>

            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Team</th>
                            <th>Primary Services</th>
                            <th>Supporting Services</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Payments Team</td>
                            <td>Payment Service</td>
                            <td>Payment DB, Payment Config, Payment Cache</td>
                        </tr>
                        <tr>
                            <td>UI Team</td>
                            <td>Frontend Service</td>
                            <td>UI Config, Static Assets</td>
                        </tr>
                        <tr>
                            <td>Logistics Team</td>
                            <td>Shipping Service</td>
                            <td>Shipping DB, Tracking Service</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3>Step 3: Business Impact Classification</h3>
            <p>Categorize services by their business criticality to plan migration phases.</p>

            <div class="flow-diagram">
                <div class="flow-item">
                    <span class="badge critical">Critical</span>
                    <p>Payment, Auth</p>
                </div>
                <div class="flow-item">
                    <span class="badge important">Important</span>
                    <p>Shipping, Inventory</p>
                </div>
                <div class="flow-item">
                    <span class="badge medium">Medium</span>
                    <p>Recommendations</p>
                </div>
                <div class="flow-item">
                    <span class="badge low">Low</span>
                    <p>Analytics, Reports</p>
                </div>
            </div>

            <h3>Step 4: Resource Utilization Analysis</h3>
            <div class="important">
                <strong>üîë Most Important Step:</strong> Analyze current resource usage from your VMs using monitoring tools.
            </div>

            <p>Gather metrics from:</p>
            <ul>
                <li>Prometheus/Grafana dashboards</li>
                <li>AWS CloudWatch / Azure Monitor</li>
                <li>Direct VM monitoring (top, htop, etc.)</li>
            </ul>

            <pre>
# Example: Getting resource usage from a VM
$ kubectl top nodes
NAME       CPU(cores)   CPU%   MEMORY(bytes)   MEMORY%
vm-node1   2548m        63%    4204Mi          54%
vm-node2   1892m        47%    3106Mi          40%
vm-node3   3210m        80%    5832Mi          75%

# Or from Docker
$ docker stats --no-stream
CONTAINER   CPU %   MEM USAGE / LIMIT   MEM %
payment     45.2%   1.2GiB / 2GiB       60.0%
shipping    23.1%   512MiB / 1GiB       50.0%
ui-service  15.3%   256MiB / 512MiB     50.0%
            </pre>

            <h3>Step 5: Cost Calculation</h3>
            <p>Compare current infrastructure costs with projected Kubernetes costs.</p>

            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Metric</th>
                            <th>Current (VMs)</th>
                            <th>Projected (K8s)</th>
                            <th>Savings</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Monthly Compute Cost</td>
                            <td>$5,000</td>
                            <td>$3,500</td>
                            <td>30%</td>
                        </tr>
                        <tr>
                            <td>Resource Utilization</td>
                            <td>40%</td>
                            <td>75%</td>
                            <td>+35%</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3>Master Requirements Sheet</h3>
            <p>Create a comprehensive tracking sheet with all gathered information:</p>

            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Service Name</th>
                            <th>Team</th>
                            <th>CPU (cores)</th>
                            <th>Memory (GB)</th>
                            <th>Business Impact</th>
                            <th>Priority</th>
                            <th>Est. Cost</th>
                            <th>Environment Ready</th>
                            <th>Timeline</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Payment Service</td>
                            <td>Payments</td>
                            <td>4</td>
                            <td>8</td>
                            <td><span class="badge critical">Critical</span></td>
                            <td>Phase 4</td>
                            <td>$450/mo</td>
                            <td>Not Ready</td>
                            <td>Month 3</td>
                        </tr>
                        <tr>
                            <td>UI Service</td>
                            <td>Frontend</td>
                            <td>2</td>
                            <td>4</td>
                            <td><span class="badge medium">Medium</span></td>
                            <td>Phase 2</td>
                            <td>$225/mo</td>
                            <td>Not Ready</td>
                            <td>Month 1</td>
                        </tr>
                        <tr>
                            <td>Analytics</td>
                            <td>Data</td>
                            <td>1</td>
                            <td>2</td>
                            <td><span class="badge low">Low</span></td>
                            <td>Phase 1</td>
                            <td>$112/mo</td>
                            <td>Not Ready</td>
                            <td>Week 2</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="success-box">
                <strong>‚úÖ Deliverable:</strong> Share this requirements sheet with management and development teams. Get alignment on the migration timeline and phases.
            </div>
        </div>

        <!-- Level 1: Proof of Concept -->
        <div class="level-section">
            <div class="level-header">
                <div class="level-number">1</div>
                <h2>Proof of Concept (POC)</h2>
            </div>

            <p>Before creating actual environments, validate that your microservices can run successfully on Kubernetes.</p>

            <h3>POC Strategy</h3>
            <div class="highlight-box">
                <strong>Select 15-20 microservices for POC:</strong>
                <ul>
                    <li>Mix of critical, important, medium, and low priority services</li>
                    <li>Include both stateful (databases) and stateless applications</li>
                    <li>Test different application types: web apps, APIs, databases, caches, queues</li>
                </ul>
            </div>

            <h3>POC Cluster Setup</h3>
            <div class="architecture-diagram">
                <h4>Small POC Cluster Configuration</h4>
                <div class="cluster-visualization">
                    <div class="node-box">
                        <strong>Control Plane Node 1</strong>
                        <p>8 CPU, 8 GB RAM</p>
                    </div>
                    <div class="node-box">
                        <strong>Control Plane Node 2</strong>
                        <p>8 CPU, 8 GB RAM</p>
                    </div>
                    <div class="node-box">
                        <strong>Control Plane Node 3</strong>
                        <p>8 CPU, 8 GB RAM</p>
                    </div>
                </div>
                <div class="cluster-visualization">
                    <div class="node-box">
                        <strong>Worker Node 1</strong>
                        <p>8 CPU, 8 GB RAM</p>
                        <div class="pod-box">payment-pod</div>
                        <div class="pod-box">ui-pod</div>
                    </div>
                    <div class="node-box">
                        <strong>Worker Node 2</strong>
                        <p>8 CPU, 8 GB RAM</p>
                        <div class="pod-box">shipping-pod</div>
                        <div class="pod-box">cache-pod</div>
                    </div>
                    <div class="node-box">
                        <strong>Worker Node 3</strong>
                        <p>8 CPU, 8 GB RAM</p>
                        <div class="pod-box">database-pod</div>
                        <div class="pod-box">queue-pod</div>
                    </div>
                </div>
            </div>

            <h3>Kubernetes Manifests Creation</h3>
            
            <h4>1. Deployment Manifest Example</h4>
            <pre>
apiVersion: apps/v1
kind: Deployment
metadata:
  name: payment-service
  namespace: payments
spec:
  replicas: 2
  selector:
    matchLabels:
      app: payment-service
  template:
    metadata:
      labels:
        app: payment-service
    spec:
      containers:
      - name: payment
        image: myregistry/payment-service:v1.0
        ports:
        - containerPort: 8080
        resources:
          requests:
            memory: "1Gi"
            cpu: "500m"
          limits:
            memory: "2Gi"
            cpu: "1000m"
        livenessProbe:
          httpGet:
            path: /health
            port: 8080
          initialDelaySeconds: 30
          periodSeconds: 10
        readinessProbe:
          httpGet:
            path: /ready
            port: 8080
          initialDelaySeconds: 5
          periodSeconds: 5
            </pre>

            <h4>2. Service Manifest Example</h4>
            <pre>
apiVersion: v1
kind: Service
metadata:
  name: payment-service
  namespace: payments
spec:
  selector:
    app: payment-service
  ports:
    - protocol: TCP
      port: 80
      targetPort: 8080
  type: ClusterIP
            </pre>

            <h4>3. Ingress Manifest Example</h4>
            <pre>
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: payment-ingress
  namespace: payments
  annotations:
    kubernetes.io/ingress.class: "nginx"
    cert-manager.io/cluster-issuer: "letsencrypt-prod"
spec:
  tls:
  - hosts:
    - api.payments.example.com
    secretName: payment-tls
  rules:
  - host: api.payments.example.com
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: payment-service
            port:
              number: 80
            </pre>

            <h3>POC Testing Checklist</h3>
            <div class="timeline">
                <div class="timeline-item">
                    <strong>Week 1:</strong> Deploy stateless applications
                    <ul>
                        <li>Create deployments and services</li>
                        <li>Configure ingress controllers</li>
                        <li>Test basic connectivity</li>
                    </ul>
                </div>
                <div class="timeline-item">
                    <strong>Week 2:</strong> Deploy stateful applications
                    <ul>
                        <li>Set up StatefulSets for databases</li>
                        <li>Configure persistent volumes</li>
                        <li>Test data persistence</li>
                    </ul>
                </div>
                <div class="timeline-item">
                    <strong>Week 3:</strong> Health checks and monitoring
                    <ul>
                        <li>Configure liveness and readiness probes</li>
                        <li>Fix CrashLoopBackOff issues</li>
                        <li>Set up basic monitoring</li>
                    </ul>
                </div>
                <div class="timeline-item">
                    <strong>Week 4:</strong> Load testing and validation
                    <ul>
                        <li>Run QA test suites</li>
                        <li>Perform load testing</li>
                        <li>Document issues and fixes</li>
                    </ul>
                </div>
            </div>

            <div class="important">
                <strong>Common POC Issues:</strong>
                <ul>
                    <li>Pods in CrashLoopBackOff - Usually due to missing environment variables or config</li>
                    <li>Service discovery issues - Ensure correct DNS configuration</li>
                    <li>Permission errors - Check RBAC and service account configurations</li>
                </ul>
            </div>
        </div>

        <!-- Level 2: Dev Kubernetes Cluster -->
        <div class="level-section">
            <div class="level-header">
                <div class="level-number">2</div>
                <h2>Dev Kubernetes Cluster</h2>
            </div>

            <p>With POC insights, create your first real Kubernetes environment - the development cluster.</p>

            <h3>Cluster Sizing Calculation</h3>
            <p>Based on Level 0 requirements gathering:</p>
            
            <div class="highlight-box">
                <strong>Example Calculation:</strong>
                <ul>
                    <li>Total Required: 40 CPU cores, 60 GB RAM</li>
                    <li>Add 20% overhead: 48 CPU cores, 72 GB RAM</li>
                    <li>Node configuration: 3 nodes √ó (16 CPU, 24 GB RAM)</li>
                </ul>
            </div>

            <h3>Namespace Design</h3>
            <p>Create namespaces based on team structure for logical isolation and RBAC:</p>

            <pre>
# Create namespaces for each team
kubectl create namespace payments
kubectl create namespace ui-team
kubectl create namespace logistics
kubectl create namespace data-team
kubectl create namespace shared-services

# Label namespaces for easy identification
kubectl label namespace payments team=payments env=dev
kubectl label namespace ui-team team=frontend env=dev
            </pre>

            <div class="architecture-diagram">
                <h4>Dev Cluster Architecture</h4>
                <img src="https://kubernetes.io/images/docs/kubernetes-cluster-architecture.svg" alt="Kubernetes Architecture" style="max-width: 100%; height: auto;">
            </div>

            <h3>Resource Management</h3>
            
            <h4>1. Resource Quotas (Namespace Level)</h4>
            <pre>
apiVersion: v1
kind: ResourceQuota
metadata:
  name: payments-quota
  namespace: payments
spec:
  hard:
    requests.cpu: "8"
    requests.memory: "16Gi"
    limits.cpu: "16"
    limits.memory: "32Gi"
    persistentvolumeclaims: "5"
    services: "10"
    pods: "20"
            </pre>

            <h4>2. Limit Ranges (Pod Level Defaults)</h4>
            <pre>
apiVersion: v1
kind: LimitRange
metadata:
  name: payments-limits
  namespace: payments
spec:
  limits:
  - default:
      cpu: "1"
      memory: "1Gi"
    defaultRequest:
      cpu: "100m"
      memory: "128Mi"
    max:
      cpu: "2"
      memory: "4Gi"
    min:
      cpu: "50m"
      memory: "64Mi"
    type: Container
            </pre>

            <div class="important">
                <strong>Key Resource Management Concepts:</strong>
                <ul>
                    <li><strong>Resource Quota:</strong> Limits total resources a namespace can consume</li>
                    <li><strong>Requests:</strong> Guaranteed resources for a pod</li>
                    <li><strong>Limits:</strong> Maximum resources a pod can use</li>
                </ul>
            </div>

            <h3>RBAC Configuration</h3>
            <p>Implement Role-Based Access Control for team isolation:</p>

            <pre>
# Role for payments team developers
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  namespace: payments
  name: payments-developer
rules:
- apiGroups: ["", "apps", "batch"]
  resources: ["pods", "services", "deployments", "jobs"]
  verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]
- apiGroups: [""]
  resources: ["pods/log", "pods/exec"]
  verbs: ["get", "list"]

---
# RoleBinding
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: payments-developer-binding
  namespace: payments
subjects:
- kind: User
  name: "john.doe@company.com"
  apiGroup: rbac.authorization.k8s.io
roleRef:
  kind: Role
  name: payments-developer
  apiGroup: rbac.authorization.k8s.io
            </pre>

            <h3>Dev Environment Testing</h3>
            <div class="success-box">
                <strong>Validation Steps:</strong>
                <ol>
                    <li>Deploy all microservices to respective namespaces</li>
                    <li>Verify resource quotas are working (try exceeding limits)</li>
                    <li>Test RBAC (developers can only access their namespaces)</li>
                    <li>Run integration tests across services</li>
                    <li>Monitor resource utilization</li>
                </ol>
            </div>

            <p><strong>Timeline:</strong> Dev environment setup typically takes 3-4 weeks including testing and adjustments.</p>
        </div>

        <!-- Level 3: Staging Environment -->
        <div class="level-section">
            <div class="level-header">
                <div class="level-number">3</div>
                <h2>Staging Environment</h2>
            </div>

            <p>Create a stable environment for QA and pre-production testing.</p>

            <h3>Staging Setup Options</h3>
            
            <div class="flow-diagram">
                <div class="flow-item">
                    <h4>Option 1: Shared Cluster</h4>
                    <p>Dev + Staging in same cluster</p>
                    <ul style="text-align: left; margin-top: 10px;">
                        <li>‚úÖ Cost effective</li>
                        <li>‚ùå Complex RBAC</li>
                        <li>‚ùå Resource contention</li>
                    </ul>
                </div>
                <div class="flow-item">
                    <h4>Option 2: Separate Cluster</h4>
                    <p>Dedicated staging cluster</p>
                    <ul style="text-align: left; margin-top: 10px;">
                        <li>‚úÖ Clear isolation</li>
                        <li>‚úÖ Production-like</li>
                        <li>‚ùå Higher cost</li>
                    </ul>
                </div>
            </div>

            <div class="highlight-box">
                <strong>Recommendation:</strong> Use separate clusters for better isolation and production similarity.
            </div>

            <h3>Staging Cluster Configuration</h3>
            
            <h4>Namespace Strategy for Shared Cluster</h4>
            <pre>
# If using shared cluster approach
kubectl create namespace dev-payments
kubectl create namespace stage-payments
kubectl create namespace dev-ui
kubectl create namespace stage-ui

# Strict RBAC to prevent cross-environment access
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  namespace: stage-payments
  name: staging-viewer
rules:
- apiGroups: ["", "apps"]
  resources: ["pods", "services", "deployments"]
  verbs: ["get", "list", "watch"]  # Read-only for staging
            </pre>

            <h4>Staging-Specific Configurations</h4>
            <pre>
# Higher resource allocations for staging
apiVersion: v1
kind: ResourceQuota
metadata:
  name: staging-quota
  namespace: stage-payments
spec:
  hard:
    requests.cpu: "16"      # Double of dev
    requests.memory: "32Gi" # Double of dev
    limits.cpu: "32"
    limits.memory: "64Gi"
            </pre>

            <h3>Environment Comparison</h3>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Aspect</th>
                            <th>Dev Environment</th>
                            <th>Staging Environment</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Purpose</td>
                            <td>Feature development</td>
                            <td>QA & integration testing</td>
                        </tr>
                        <tr>
                            <td>Stability</td>
                            <td>Unstable (frequent changes)</td>
                            <td>Stable (controlled releases)</td>
                        </tr>
                        <tr>
                            <td>Resources</td>
                            <td>Minimal viable</td>
                            <td>Production-like</td>
                        </tr>
                        <tr>
                            <td>Access</td>
                            <td>All developers</td>
                            <td>QA team + limited dev access</td>
                        </tr>
                        <tr>
                            <td>Data</td>
                            <td>Test data</td>
                            <td>Production-like data (sanitized)</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="important">
                <strong>Key Staging Requirements:</strong>
                <ul>
                    <li>Must be stable for reproducing production issues</li>
                    <li>Should have similar resource capacity as production</li>
                    <li>Needs production-like monitoring and logging</li>
                    <li>Should use the same deployment process as production</li>
                </ul>
            </div>
        </div>

        <!-- Level 4: Production Onboarding -->
        <div class="level-section">
            <div class="level-header">
                <div class="level-number">4</div>
                <h2>Production Onboarding</h2>
            </div>

            <p>The critical phase where we deploy to production with high availability and reliability.</p>

            <h3>Production Requirements</h3>
            <div class="important">
                <strong>Two Critical Aspects for Production:</strong>
                <ol>
                    <li><strong>Multi-AZ (Availability Zone) Setup</strong> - Mandatory</li>
                    <li><strong>Multi-Region Setup</strong> - Based on global presence</li>
                </ol>
            </div>

            <h3>Multi-AZ Architecture</h3>
            <div class="architecture-diagram">
                <h4>Production Cluster Across Availability Zones</h4>
                <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <strong>Region: US-EAST-1</strong>
                    </div>
                    <div class="cluster-visualization">
                        <div style="border: 2px dashed #666; padding: 15px; border-radius: 8px;">
                            <h5>AZ: us-east-1a</h5>
                            <div class="node-box">
                                <strong>Node 1</strong>
                                <p>16 CPU, 32 GB</p>
                                <div class="pod-box">payment-pod-1</div>
                            </div>
                            <div class="node-box">
                                <strong>Node 2</strong>
                                <p>16 CPU, 32 GB</p>
                                <div class="pod-box">ui-pod-1</div>
                            </div>
                        </div>
                        <div style="border: 2px dashed #666; padding: 15px; border-radius: 8px;">
                            <h5>AZ: us-east-1b</h5>
                            <div class="node-box">
                                <strong>Node 3</strong>
                                <p>16 CPU, 32 GB</p>
                                <div class="pod-box">payment-pod-2</div>
                            </div>
                            <div class="node-box">
                                <strong>Node 4</strong>
                                <p>16 CPU, 32 GB</p>
                                <div class="pod-box">ui-pod-2</div>
                            </div>
                        </div>
                        <div style="border: 2px dashed #666; padding: 15px; border-radius: 8px;">
                            <h5>AZ: us-east-1c</h5>
                            <div class="node-box">
                                <strong>Node 5</strong>
                                <p>16 CPU, 32 GB</p>
                                <div class="pod-box">payment-pod-3</div>
                            </div>
                            <div class="node-box">
                                <strong>Node 6</strong>
                                <p>16 CPU, 32 GB</p>
                                <div class="pod-box">ui-pod-3</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <h3>Topology Spread Constraints</h3>
            <p>Ensure pods are distributed across availability zones:</p>

            <pre>
apiVersion: apps/v1
kind: Deployment
metadata:
  name: payment-service
  namespace: payments
spec:
  replicas: 3
  selector:
    matchLabels:
      app: payment-service
  template:
    metadata:
      labels:
        app: payment-service
    spec:
      topologySpreadConstraints:
      - maxSkew: 1
        topologyKey: topology.kubernetes.io/zone
        whenUnsatisfiable: DoNotSchedule
        labelSelector:
          matchLabels:
            app: payment-service
      - maxSkew: 1
        topologyKey: kubernetes.io/hostname
        whenUnsatisfiable: DoNotSchedule
        labelSelector:
          matchLabels:
            app: payment-service
      containers:
      - name: payment
        image: myregistry/payment-service:v2.0
        resources:
          requests:
            memory: "2Gi"
            cpu: "1"
          limits:
            memory: "4Gi"
            cpu: "2"
            </pre>

            <h3>Production Best Practices</h3>

            <h4>1. Autoscaling Configuration</h4>
            <pre>
# Horizontal Pod Autoscaler
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: payment-hpa
  namespace: payments
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: payment-service
  minReplicas: 3
  maxReplicas: 10
  metrics:
  - type: Resource
    resource:
      name: cpu
      target:
        type: Utilization
        averageUtilization: 70
  - type: Resource
    resource:
      name: memory
      target:
        type: Utilization
        averageUtilization: 80

---
# Cluster Autoscaler or Karpenter configuration
apiVersion: v1
kind: ConfigMap
metadata:
  name: cluster-autoscaler-status
  namespace: kube-system
data:
  nodes.min: "6"
  nodes.max: "20"
  scale-down-delay-after-add: "10m"
  scale-down-unneeded-time: "10m"
            </pre>

            <h4>2. Production Monitoring Stack</h4>
            <pre>
# Prometheus monitoring for production
apiVersion: v1
kind: ServiceMonitor
metadata:
  name: payment-service-monitor
  namespace: payments
spec:
  selector:
    matchLabels:
      app: payment-service
  endpoints:
  - port: metrics
    interval: 30s
    path: /metrics
            </pre>

            <h4>3. Network Policies</h4>
            <pre>
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: payment-network-policy
  namespace: payments
spec:
  podSelector:
    matchLabels:
      app: payment-service
  policyTypes:
  - Ingress
  - Egress
  ingress:
  - from:
    - namespaceSelector:
        matchLabels:
          name: ui-team
    - podSelector:
        matchLabels:
          app: api-gateway
    ports:
    - protocol: TCP
      port: 8080
  egress:
  - to:
    - namespaceSelector:
        matchLabels:
          name: payments
    ports:
    - protocol: TCP
      port: 5432  # PostgreSQL
            </pre>

            <div class="success-box">
                <strong>Production Checklist:</strong>
                <ul>
                    <li>‚úì Multi-AZ node distribution</li>
                    <li>‚úì Pod topology spread constraints</li>
                    <li>‚úì Autoscaling (HPA + Cluster)</li>
                    <li>‚úì Monitoring & alerting</li>
                    <li>‚úì Network policies</li>
                    <li>‚úì Resource requests/limits</li>
                    <li>‚úì Health checks configured</li>
                    <li>‚úì Backup & disaster recovery</li>
                </ul>
            </div>
        </div>

        <!-- Level 5: Scaling Production -->
        <div class="level-section">
            <div class="level-header">
                <div class="level-number">5</div>
                <h2>Scaling Production (High Availability & Multi-Region)</h2>
            </div>

            <p>Achieve global scale with multi-region deployments for low latency and high availability.</p>

            <h3>Multi-Region Architecture</h3>
            <div class="architecture-diagram">
                <h4>Global Kubernetes Deployment</h4>
                <div style="text-align: center; padding: 20px;">
                    <img src="https://d33wubrfki0l68.cloudfront.net/2475489eaf20163ec0f54ddc1d92aa8d4c87c96b/e7c81/images/docs/components-of-kubernetes.svg" alt="Kubernetes Components" style="max-width: 80%; margin-bottom: 20px;">
                    
                    <div class="flow-diagram" style="justify-content: center; margin-top: 30px;">
                        <div class="flow-item" style="background: #e8f5e9;">
                            <strong>US Region</strong>
                            <p>K8s Cluster</p>
                            <p>3 AZs</p>
                        </div>
                        <div class="flow-item" style="background: #fff3e0;">
                            <strong>EU Region</strong>
                            <p>K8s Cluster</p>
                            <p>3 AZs</p>
                        </div>
                        <div class="flow-item" style="background: #e3f2fd;">
                            <strong>Asia Region</strong>
                            <p>K8s Cluster</p>
                            <p>3 AZs</p>
                        </div>
                    </div>
                </div>
            </div>

            <h3>Global Load Balancing</h3>
            <p>Route traffic to the nearest regional cluster using DNS-based load balancing:</p>

            <pre>
# Example: AWS Route 53 Geolocation Routing Policy
{
  "Name": "api.global.example.com",
  "Type": "A",
  "SetIdentifier": "US",
  "GeoLocation": {
    "CountryCode": "US"
  },
  "AliasTarget": {
    "HostedZoneId": "Z35SXDOTRQ7X7K",
    "DNSName": "us-cluster-ingress.elb.amazonaws.com",
    "EvaluateTargetHealth": true
  }
}

# Similar configuration for EU and Asia regions
            </pre>

            <h3>Cross-Region Data Synchronization</h3>
            <div class="highlight-box">
                <strong>Data Consistency Strategies:</strong>
                <ul>
                    <li><strong>Active-Active:</strong> All regions serve traffic with bi-directional replication</li>
                    <li><strong>Active-Passive:</strong> Primary region with failover capabilities</li>
                    <li><strong>Read Replicas:</strong> Write to primary, read from local replicas</li>
                </ul>
            </div>

            <h3>Multi-Region Deployment Example</h3>
            <pre>
# Federation configuration for multi-region deployments
apiVersion: types.kubefed.io/v1beta1
kind: FederatedDeployment
metadata:
  name: payment-service
  namespace: payments
spec:
  template:
    metadata:
      labels:
        app: payment-service
    spec:
      replicas: 3
      selector:
        matchLabels:
          app: payment-service
      template:
        metadata:
          labels:
            app: payment-service
        spec:
          containers:
          - name: payment
            image: myregistry/payment-service:v2.0
  placement:
    clusters:
    - name: us-cluster
    - name: eu-cluster
    - name: asia-cluster
  overrides:
  - clusterName: us-cluster
    clusterOverrides:
    - path: "/spec/replicas"
      value: 5  # More replicas in US
  - clusterName: eu-cluster
    clusterOverrides:
    - path: "/spec/replicas"
      value: 4
  - clusterName: asia-cluster
    clusterOverrides:
    - path: "/spec/replicas"
      value: 3
            </pre>

            <div class="important">
                <strong>Multi-Region Considerations:</strong>
                <ul>
                    <li>Data sovereignty and compliance requirements</li>
                    <li>Network latency between regions</li>
                    <li>Cost implications of cross-region traffic</li>
                    <li>Complexity of maintaining multiple clusters</li>
                </ul>
            </div>
        </div>

        <!-- Beyond Level 5 -->
        <div class="level-section">
            <div class="level-header">
                <div class="level-number">‚àû</div>
                <h2>Beyond Level 5: Advanced Topics</h2>
            </div>

            <p>Kubernetes is vast. After implementing the core infrastructure, consider these advanced topics:</p>

            <div class="flow-diagram">
                <div class="flow-item">
                    <h4>Service Mesh</h4>
                    <p>Istio, Linkerd</p>
                    <ul style="text-align: left; font-size: 0.9em;">
                        <li>Traffic management</li>
                        <li>Security policies</li>
                        <li>Observability</li>
                    </ul>
                </div>
                <div class="flow-item">
                    <h4>GitOps</h4>
                    <p>ArgoCD, Flux</p>
                    <ul style="text-align: left; font-size: 0.9em;">
                        <li>Declarative deployments</li>
                        <li>Git as source of truth</li>
                        <li>Automated sync</li>
                    </ul>
                </div>
                <div class="flow-item">
                    <h4>Policy Engines</h4>
                    <p>Kyverno, OPA</p>
                    <ul style="text-align: left; font-size: 0.9em;">
                        <li>Security policies</li>
                        <li>Resource validation</li>
                        <li>Compliance</li>
                    </ul>
                </div>
                <div class="flow-item">
                    <h4>Advanced Security</h4>
                    <p>Falco, Trivy</p>
                    <ul style="text-align: left; font-size: 0.9em;">
                        <li>Runtime security</li>
                        <li>Image scanning</li>
                        <li>RBAC auditing</li>
                    </ul>
                </div>
            </div>

            <h3>Continuous Improvement Areas</h3>
            <ul>
                <li><strong>Helm Charts:</strong> Package applications for easy deployment</li>
                <li><strong>Operators:</strong> Automate complex application management</li>
                <li><strong>Cost Optimization:</strong> Right-sizing, spot instances, resource optimization</li>
                <li><strong>Disaster Recovery:</strong> Backup strategies, cross-region failover</li>
                <li><strong>Compliance:</strong> PCI-DSS, HIPAA, SOC2 requirements</li>
                <li><strong>Performance Tuning:</strong> Kernel parameters, network optimization</li>
            </ul>

            <div class="success-box">
                <strong>üéâ Congratulations!</strong> You've successfully designed and implemented a production-grade Kubernetes infrastructure. Remember, this is an ongoing journey - continue learning and improving your setup based on operational insights.
            </div>
        </div>

        <!-- Summary Timeline -->
        <div class="level-section">
            <h2>üìÖ Implementation Timeline Summary</h2>
            
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Phase</th>
                            <th>Duration</th>
                            <th>Key Activities</th>
                            <th>Deliverables</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Level 0</strong><br>Requirements</td>
                            <td>1-2 weeks</td>
                            <td>Gather requirements, analyze resources, calculate costs</td>
                            <td>Requirements sheet, migration plan</td>
                        </tr>
                        <tr>
                            <td><strong>Level 1</strong><br>POC</td>
                            <td>3-4 weeks</td>
                            <td>Test 15-20 services, fix issues, validate approach</td>
                            <td>POC report, validated manifests</td>
                        </tr>
                        <tr>
                            <td><strong>Level 2</strong><br>Dev Environment</td>
                            <td>3-4 weeks</td>
                            <td>Create dev cluster, implement RBAC, resource management</td>
                            <td>Working dev environment</td>
                        </tr>
                        <tr>
                            <td><strong>Level 3</strong><br>Staging</td>
                            <td>2-3 weeks</td>
                            <td>Setup staging cluster, production-like testing</td>
                            <td>Stable staging environment</td>
                        </tr>
                        <tr>
                            <td><strong>Level 4</strong><br>Production</td>
                            <td>4-6 weeks</td>
                            <td>Multi-AZ setup, monitoring, security hardening</td>
                            <td>Production-ready cluster</td>
                        </tr>
                        <tr>
                            <td><strong>Level 5</strong><br>Scaling</td>
                            <td>4-8 weeks</td>
                            <td>Multi-region setup, global load balancing</td>
                            <td>Globally distributed system</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="highlight-box">
                <strong>Total Timeline:</strong> 3-6 months for complete implementation, depending on complexity and team size.
            </div>
        </div>
    </div>
</body>
</html>