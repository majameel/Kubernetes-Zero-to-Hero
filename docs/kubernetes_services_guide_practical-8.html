<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kubernetes Services Deep Dive - Complete Guide</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: white;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            border-radius: 10px;
            margin-top: 20px;
            margin-bottom: 20px;
        }

        .header {
            text-align: center;
            background: linear-gradient(135deg, #2196F3, #1976D2);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .section {
            margin-bottom: 40px;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            border-left: 5px solid #2196F3;
        }

        .section h2 {
            color: #2196F3;
            font-size: 1.8em;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }

        .section h2::before {
            content: "üîß";
            margin-right: 10px;
            font-size: 1.2em;
        }

        .section h3 {
            color: #1976D2;
            margin: 20px 0 15px 0;
            font-size: 1.3em;
        }

        .command-block {
            background: #1e1e1e;
            color: #00ff00;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            border-left: 4px solid #00ff00;
            overflow-x: auto;
        }

        .command-block .prompt {
            color: #ffff00;
        }

        .command-block .comment {
            color: #888;
            font-style: italic;
        }

        .yaml-block {
            background: #1e1e1e;
            border: 2px solid #007acc;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Consolas', 'Monaco', monospace;
            margin: 20px 0;
            overflow-x: auto;
            position: relative;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .yaml-block::before {
            content: "üìÑ YAML Configuration";
            position: absolute;
            top: -12px;
            left: 20px;
            background: #007acc;
            color: white;
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .yaml-block .key {
            color: #569cd6;
            font-weight: bold;
            text-shadow: 0 0 2px rgba(86, 156, 214, 0.3);
        }

        .yaml-block .value {
            color: #ce9178;
            font-weight: 500;
        }

        .yaml-block .comment {
            color: #6a9955;
            font-style: italic;
            opacity: 0.9;
        }

        .yaml-block .indent {
            color: #808080;
        }

        .flow-diagram {
            background: white;
            border: 2px solid #2196F3;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }

        .flow-step {
            display: inline-block;
            background: #E3F2FD;
            border: 2px solid #2196F3;
            border-radius: 20px;
            padding: 15px 25px;
            margin: 10px;
            position: relative;
            min-width: 150px;
        }

        .flow-step.highlighted {
            background: #2196F3;
            color: white;
        }

        .flow-step.problem {
            background: #ffebee;
            border-color: #f44336;
            color: #d32f2f;
        }

        .flow-step.solution {
            background: #e8f5e8;
            border-color: #4caf50;
            color: #2e7d32;
        }

        .arrow {
            font-size: 1.5em;
            color: #2196F3;
            margin: 0 10px;
        }

        .architecture-diagram {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 25px 0;
            text-align: center;
            position: relative;
        }

        .pod {
            display: inline-block;
            background: #4CAF50;
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 10px;
            min-width: 120px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .service {
            display: inline-block;
            background: #FF9800;
            color: white;
            padding: 20px;
            border-radius: 50%;
            margin: 20px;
            min-width: 100px;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        }

        .node {
            background: #9C27B0;
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 15px 0;
        }

        .important-note {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-left: 5px solid #f39c12;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }

        .important-note::before {
            content: "‚ö†Ô∏è ";
            font-size: 1.2em;
        }

        .success-note {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-left: 5px solid #28a745;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }

        .success-note::before {
            content: "‚úÖ ";
            font-size: 1.2em;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .comparison-table th {
            background: #2196F3;
            color: white;
            padding: 15px;
            text-align: left;
        }

        .comparison-table td {
            padding: 15px;
            border-bottom: 1px solid #eee;
        }

        .comparison-table tr:hover {
            background: #f5f5f5;
        }

        .network-flow {
            display: flex;
            justify-content: space-around;
            align-items: center;
            flex-wrap: wrap;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .network-node {
            background: rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            padding: 15px;
            border-radius: 10px;
            margin: 10px;
            text-align: center;
            min-width: 120px;
            border: 1px solid rgba(255,255,255,0.3);
        }

        .cubeshark-demo {
            background: #1a1a1a;
            color: #00ff00;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-family: monospace;
        }

        .step-by-step {
            counter-reset: step-counter;
            list-style: none;
        }

        .step-by-step li {
            counter-increment: step-counter;
            margin: 15px 0;
            padding: 15px;
            background: #f8f9fa;
            border-left: 4px solid #2196F3;
            border-radius: 5px;
            position: relative;
            padding-left: 50px;
        }

        .step-by-step li::before {
            content: counter(step-counter);
            position: absolute;
            left: 15px;
            top: 15px;
            background: #2196F3;
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9em;
        }

        .collapsible {
            background-color: #2196F3;
            color: white;
            cursor: pointer;
            padding: 18px;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 16px;
            border-radius: 5px;
            margin: 10px 0;
            transition: 0.3s;
        }

        .collapsible:hover {
            background-color: #1976D2;
        }

        .collapsible-content {
            padding: 0 18px;
            display: none;
            overflow: hidden;
            background-color: #f1f1f1;
            border-radius: 5px;
            margin-bottom: 10px;
        }

        .collapsible-content.active {
            display: block;
            padding: 18px;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .network-flow {
                flex-direction: column;
            }
            
            .flow-step {
                display: block;
                margin: 10px 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ Kubernetes Services Deep Dive</h1>
            <p>Complete Guide with Practical Demonstrations using Cube Shark</p>
        </div>

        <div class="section">
            <h2>üìã Overview</h2>
            <p>This comprehensive guide covers Kubernetes services, focusing on three main capabilities:</p>
            
            <div class="flow-diagram">
                <div class="flow-step highlighted">üåê Exposing Applications</div>
                <span class="arrow">‚Üí</span>
                <div class="flow-step highlighted">üîç Service Discovery</div>
                <span class="arrow">‚Üí</span>
                <div class="flow-step highlighted">‚öñÔ∏è Load Balancing</div>
            </div>
            
            <div class="important-note">
                <strong>Prerequisites:</strong> This demo uses minikube Kubernetes cluster. Cube Shark tool is used for traffic visualization.
            </div>
        </div>

        <div class="section">
            <h2>üîß Initial Setup and Resource Clearing</h2>
            
            <h3>Check Cluster Status</h3>
            <div class="command-block">
<span class="prompt">$</span> minikube status
<span class="comment"># Verify your minikube cluster is running</span>
</div>

            <h3>Clear Existing Resources</h3>
            <ol class="step-by-step">
                <li>
                    <strong>Check current resources:</strong>
                    <div class="command-block">
<span class="prompt">$</span> kubectl get all
<span class="comment"># Lists all resources in current namespace</span>
</div>
                </li>
                <li>
                    <strong>Delete existing deployment:</strong>
                    <div class="command-block">
<span class="prompt">$</span> kubectl delete deploy &lt;deployment-name&gt;
<span class="comment"># Replace with actual deployment name from 'get all' command</span>
</div>
                </li>
                <li>
                    <strong>Delete existing service:</strong>
                    <div class="command-block">
<span class="prompt">$</span> kubectl delete svc &lt;service-name&gt;
<span class="comment"># Don't delete the default 'kubernetes' service</span>
</div>
                </li>
                <li>
                    <strong>Verify cleanup:</strong>
                    <div class="command-block">
<span class="prompt">$</span> kubectl get all
<span class="comment"># Should only show the default 'kubernetes' service</span>
</div>
                </li>
            </ol>
        </div>

        <div class="section">
            <h2>üê≥ Application and Docker Image</h2>
            
            <div class="important-note">
                <strong>Application Details:</strong> Simple Python Django application running on Port 8000
                <br>Repository: Docker 0 to Hero GitHub repository
            </div>

            <h3>Build Docker Image</h3>
            <div class="command-block">
<span class="prompt">$</span> cd examples/python-app
<span class="comment"># Navigate to application directory</span>

<span class="prompt">$</span> docker build -t python-sample-application-demo:V1 .
<span class="comment"># Build and tag the Docker image</span>
</div>

            <div class="architecture-diagram">
                <h4>üèóÔ∏è Application Architecture</h4>
                <div style="margin: 20px 0;">
                    <div style="background: #FF5722; color: white; padding: 15px; border-radius: 10px; display: inline-block; margin: 10px;">
                        üì¶ Docker Image<br>
                        <small>python-sample-application-demo:V1</small>
                    </div>
                    <span class="arrow">‚Üí</span>
                    <div style="background: #4CAF50; color: white; padding: 15px; border-radius: 10px; display: inline-block; margin: 10px;">
                        üöÄ Port 8000<br>
                        <small>Django Application</small>
                    </div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>üöÄ Creating a Deployment</h2>
            
            <div class="important-note">
                <strong>Key Concept:</strong> Deployments create ReplicaSets, which create Pods. Pods have dynamic IP addresses that change when recreated!
            </div>

            <h3>Deployment YAML Configuration</h3>
            <div class="yaml-block">
<span class="key">apiVersion:</span> <span class="value">apps/v1</span>
<span class="key">kind:</span> <span class="value">Deployment</span>
<span class="key">metadata:</span>
<span class="indent">  </span><span class="key">name:</span> <span class="value">sample-python-app</span>
<span class="key">spec:</span>
<span class="indent">  </span><span class="key">replicas:</span> <span class="value">2</span> <span class="comment"># Create 2 pods for load balancing demo</span>
<span class="indent">  </span><span class="key">selector:</span>
<span class="indent">    </span><span class="key">matchLabels:</span>
<span class="indent">      </span><span class="key">app:</span> <span class="value">sample-python-app</span> <span class="comment"># Label selector for pods</span>
<span class="indent">  </span><span class="key">template:</span>
<span class="indent">    </span><span class="key">metadata:</span>
<span class="indent">      </span><span class="key">labels:</span>
<span class="indent">        </span><span class="key">app:</span> <span class="value">sample-python-app</span> <span class="comment"># CRITICAL: Must match selector above!</span>
<span class="indent">    </span><span class="key">spec:</span>
<span class="indent">      </span><span class="key">containers:</span>
<span class="indent">      - </span><span class="key">name:</span> <span class="value">python-app</span>
<span class="indent">        </span><span class="key">image:</span> <span class="value">python-sample-application-demo:V1</span>
<span class="indent">        </span><span class="key">ports:</span>
<span class="indent">        - </span><span class="key">containerPort:</span> <span class="value">8000</span> <span class="comment"># Port inside container</span>
</div>

            <h3>Deploy to Cluster</h3>
            <div class="command-block">
<span class="prompt">$</span> kubectl apply -f deployment.yaml
<span class="comment"># Create the deployment</span>

<span class="prompt">$</span> kubectl get deploy
<span class="comment"># Check deployment status</span>

<span class="prompt">$</span> kubectl get pods -o wide
<span class="comment"># See pods with their Cluster IP addresses</span>
</div>

            <div class="architecture-diagram">
                <h4>üèóÔ∏è Deployment Architecture</h4>
                <div class="deployment-container">
                    <div style="text-align: center; margin-bottom: 20px; font-size: 1.2em;">
                        <strong>üìä Deployment: sample-python-app (Replicas: 2)</strong>
                    </div>
                    <div style="display: flex; justify-content: space-around; align-items: center; flex-wrap: wrap;">
                        <div class="pod">
                            <div><strong>Pod 1</strong></div>
                            <div style="font-size: 0.9em; margin-top: 5px;">IP: 172.17.0.5</div>
                            <div style="font-size: 0.9em;">Port: 8000</div>
                            <div style="font-size: 0.8em; margin-top: 5px;">Label: app=sample-python-app</div>
                        </div>
                        <div class="pod">
                            <div><strong>Pod 2</strong></div>
                            <div style="font-size: 0.9em; margin-top: 5px;">IP: 172.17.0.6</div>
                            <div style="font-size: 0.9em;">Port: 8000</div>
                            <div style="font-size: 0.8em; margin-top: 5px;">Label: app=sample-python-app</div>
                        </div>
                    </div>
                    <div style="margin-top: 20px; font-size: 0.9em; opacity: 0.8;">
                        ‚ö° ReplicaSet ensures 2 pods are always running
                    </div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>‚ö†Ô∏è The Pod IP Change Problem</h2>
            
            <div class="architecture-diagram">
                <h4>‚ö†Ô∏è Dynamic Pod IP Problem</h4>
                <div style="display: flex; justify-content: space-around; align-items: center; flex-wrap: wrap; padding: 20px;">
                    <div style="text-align: center;">
                        <div class="pod" style="background: linear-gradient(135deg, #4CAF50, #45a049);">
                            <div><strong>Original Pod</strong></div>
                            <div style="margin-top: 5px;">IP: 172.17.0.5</div>
                            <div style="font-size: 0.8em; margin-top: 5px;">‚úÖ Running</div>
                        </div>
                        <div style="margin-top: 10px; font-size: 0.9em;">Step 1: Pod Running</div>
                    </div>
                    
                    <div class="flow-arrow" style="color: #f44336;">‚ùå</div>
                    
                    <div style="text-align: center;">
                        <div class="pod" style="background: linear-gradient(135deg, #f44336, #d32f2f);">
                            <div><strong>Deleted Pod</strong></div>
                            <div style="margin-top: 5px;">IP: 172.17.0.5</div>
                            <div style="font-size: 0.8em; margin-top: 5px;">‚ùå Deleted</div>
                        </div>
                        <div style="margin-top: 10px; font-size: 0.9em;">Step 2: Pod Failure/Deletion</div>
                    </div>
                    
                    <div class="flow-arrow" style="color: #FF9800;">üîÑ</div>
                    
                    <div style="text-align: center;">
                        <div class="pod" style="background: linear-gradient(135deg, #4CAF50, #45a049);">
                            <div><strong>New Pod</strong></div>
                            <div style="margin-top: 5px;">IP: 172.17.0.7</div>
                            <div style="font-size: 0.8em; margin-top: 5px;">‚úÖ Running</div>
                        </div>
                        <div style="margin-top: 10px; font-size: 0.9em;">Step 3: New Pod (Different IP!)</div>
                    </div>
                </div>
                
                <div style="background: #ffebee; border: 2px solid #f44336; border-radius: 10px; padding: 15px; margin-top: 20px;">
                    <strong style="color: #d32f2f;">‚ùå Problem:</strong> Applications accessing pods directly by IP will break when pods are recreated!
                </div>
                
                <div style="background: #e8f5e8; border: 2px solid #4caf50; border-radius: 10px; padding: 15px; margin-top: 15px;">
                    <strong style="color: #2e7d32;">‚úÖ Solution:</strong> Use Kubernetes Services with label selectors instead of direct IP access
                </div>
            </div>

            <h3>Demonstrate IP Change</h3>
            <div class="command-block">
<span class="prompt">$</span> kubectl get pods -o wide
<span class="comment"># Note the current IP addresses</span>

<span class="prompt">$</span> kubectl delete pod &lt;pod-name&gt;
<span class="comment"># Delete a pod</span>

<span class="prompt">$</span> kubectl get pods -o wide
<span class="comment"># See the new pod has a different IP!</span>
</div>

            <div class="flow-diagram">
                <div class="flow-step solution">üîç Solution: Service Discovery</div>
                <br>
                <small>Services use <strong>labels and selectors</strong> instead of unstable IP addresses</small>
            </div>
        </div>

        <div class="section">
            <h2>üåê Accessing Pods Directly (Internal Only)</h2>
            
            <div class="important-note">
                Pod IPs are only accessible from <strong>within</strong> the Kubernetes cluster network.
            </div>

            <div class="command-block">
<span class="prompt">$</span> minikube ssh
<span class="comment"># SSH into the minikube node</span>

<span class="prompt">minikube$</span> curl -L http://172.17.0.5:8000/demo
<span class="comment"># Access pod directly from within cluster</span>
<span class="comment"># Replace IP with actual pod IP from 'kubectl get pods -o wide'</span>
</div>

            <div class="network-flow">
                <div class="network-node">üíª Your Laptop<br><small>‚ùå Cannot access</small></div>
                <div class="network-node">üñ•Ô∏è Minikube Node<br><small>‚úÖ Can access</small></div>
                <div class="network-node">üöÄ Pod<br><small>172.17.0.5:8000</small></div>
            </div>
        </div>

        <div class="section">
            <h2>üåü Kubernetes Services - Exposing Applications</h2>
            
            <div class="comparison-table">
                <thead>
                    <tr>
                        <th>Service Type</th>
                        <th>Access Level</th>
                        <th>Use Case</th>
                        <th>IP Address</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>NodePort</strong></td>
                        <td>Internal/Organization</td>
                        <td>Internal applications</td>
                        <td>Node IP + Port (30000-32767)</td>
                    </tr>
                    <tr>
                        <td><strong>LoadBalancer</strong></td>
                        <td>External/Public</td>
                        <td>Public applications</td>
                        <td>Cloud Provider Public IP</td>
                    </tr>
                </tbody>
            </table>

            <h3>NodePort Service Configuration</h3>
            <div class="yaml-block">
<span class="key">apiVersion:</span> <span class="value">v1</span>
<span class="key">kind:</span> <span class="value">Service</span>
<span class="key">metadata:</span>
<span class="indent">  </span><span class="key">name:</span> <span class="value">python-django-app-service</span>
<span class="key">spec:</span>
<span class="indent">  </span><span class="key">type:</span> <span class="value">NodePort</span> <span class="comment"># Exposes on Node IP</span>
<span class="indent">  </span><span class="key">selector:</span>
<span class="indent">    </span><span class="key">app:</span> <span class="value">sample-python-app</span> <span class="comment"># MUST match Pod labels exactly!</span>
<span class="indent">  </span><span class="key">ports:</span>
<span class="indent">  - </span><span class="key">port:</span> <span class="value">80</span> <span class="comment"># Service listens on this port internally</span>
<span class="indent">    </span><span class="key">targetPort:</span> <span class="value">8000</span> <span class="comment"># Container port (where app runs)</span>
<span class="indent">    </span><span class="key">nodePort:</span> <span class="value">30007</span> <span class="comment"># External port on Node (30000-32767)</span>
</div>

            <h3>Deploy and Access NodePort Service</h3>
            <div class="command-block">
<span class="prompt">$</span> kubectl apply -f service.yaml
<span class="comment"># Create the service</span>

<span class="prompt">$</span> kubectl get svc
<span class="comment"># Check service and port mapping (80:30007/TCP)</span>

<span class="prompt">$</span> minikube ip
<span class="comment"># Get node IP address</span>

<span class="prompt">$</span> curl -L http://&lt;minikube-ip&gt;:30007/demo
<span class="comment"># Access application via NodePort</span>
</div>

            <div class="architecture-diagram">
                <h4>üåê NodePort Service Traffic Flow</h4>
                <div class="visual-diagram">
                    <div class="diagram-element client-element">
                        <div style="font-size: 2em;">üíª</div>
                        <div><strong>Client</strong></div>
                        <div>Your Laptop</div>
                    </div>
                    
                    <div class="flow-arrow">‚û°Ô∏è</div>
                    
                    <div class="diagram-element service-element">
                        <div style="font-size: 2em;">üñ•Ô∏è</div>
                        <div><strong>Node</strong></div>
                        <div>192.168.49.2:30007</div>
                        <div style="font-size: 0.8em;">(minikube IP)</div>
                    </div>
                    
                    <div class="flow-arrow">‚û°Ô∏è</div>
                    
                    <div class="diagram-element service-element">
                        <div style="font-size: 2em;">üåê</div>
                        <div><strong>Service</strong></div>
                        <div>Load Balancer</div>
                        <div style="font-size: 0.8em;">Port 80 ‚Üí 8000</div>
                    </div>
                    
                    <div class="flow-arrow">‚û°Ô∏è</div>
                    
                    <div class="diagram-element pod-element">
                        <div style="font-size: 2em;">üöÄ</div>
                        <div><strong>Pods</strong></div>
                        <div>172.17.0.5:8000</div>
                        <div>172.17.0.6:8000</div>
                    </div>
                </div>
                
                <div style="background: rgba(255,255,255,0.8); padding: 15px; border-radius: 10px; margin-top: 20px;">
                    <strong>Traffic Flow:</strong> Client ‚Üí Node IP:30007 ‚Üí Service (port 80) ‚Üí Pods (targetPort 8000)
                </div>
            </div>
        </div>

        <div class="section">
            <h2>‚òÅÔ∏è LoadBalancer Service</h2>
            
            <div class="important-note">
                LoadBalancer type requires a <strong>Cloud Provider</strong> (AWS, Azure, GCP) to provision external IP addresses.
            </div>

            <h3>Convert to LoadBalancer</h3>
            <div class="command-block">
<span class="prompt">$</span> kubectl edit service python-django-app-service
<span class="comment"># Change 'type: NodePort' to 'type: LoadBalancer'</span>

<span class="prompt">$</span> kubectl get svc
<span class="comment"># EXTERNAL-IP will show &lt;pending&gt; on minikube</span>
<span class="comment"># Would show public IP on cloud providers</span>
</div>

            <div class="architecture-diagram">
                <h4>‚òÅÔ∏è LoadBalancer Service (Cloud Environment)</h4>
                <div class="visual-diagram">
                    <div class="diagram-element client-element">
                        <div style="font-size: 2em;">üåç</div>
                        <div><strong>Internet</strong></div>
                        <div>External Users</div>
                        <div style="font-size: 0.8em;">Anywhere in the world</div>
                    </div>
                    
                    <div class="flow-arrow">‚û°Ô∏è</div>
                    
                    <div class="diagram-element service-element">
                        <div style="font-size: 2em;">‚òÅÔ∏è</div>
                        <div><strong>Cloud LoadBalancer</strong></div>
                        <div>Public IP: 203.0.113.10</div>
                        <div style="font-size: 0.8em;">AWS/Azure/GCP</div>
                    </div>
                    
                    <div class="flow-arrow">‚û°Ô∏è</div>
                    
                    <div class="diagram-element service-element">
                        <div style="font-size: 2em;">üîÑ</div>
                        <div><strong>K8s Service</strong></div>
                        <div>Load Balancer</div>
                        <div style="font-size: 0.8em;">Distributes traffic</div>
                    </div>
                    
                    <div class="flow-arrow">‚û°Ô∏è</div>
                    
                    <div class="diagram-element pod-element">
                        <div style="font-size: 2em;">üöÄ</div>
                        <div><strong>Pods</strong></div>
                        <div>172.17.0.5:8000</div>
                        <div>172.17.0.6:8000</div>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 25px;">
                    <div style="background: #e8f5e8; padding: 15px; border-radius: 10px; border-left: 4px solid #4caf50;">
                        <div style="font-weight: bold; color: #2e7d32; margin-bottom: 10px;">‚úÖ Cloud Provider (AWS/Azure/GCP)</div>
                        <ul style="margin: 0; padding-left: 20px; color: #2e7d32;">
                            <li>Automatic public IP allocation</li>
                            <li>Cloud Load Balancer provisioning</li>
                            <li>Global accessibility</li>
                            <li>SSL termination support</li>
                        </ul>
                    </div>
                    <div style="background: #fff3cd; padding: 15px; border-radius: 10px; border-left: 4px solid #ffc107;">
                        <div style="font-weight: bold; color: #856404; margin-bottom: 10px;">‚ö†Ô∏è Minikube/Local</div>
                        <ul style="margin: 0; padding-left: 20px; color: #856404;">
                            <li>EXTERNAL-IP stays &lt;pending&gt;</li>
                            <li>No cloud provider integration</li>
                            <li>Use MetalLB for local testing</li>
                            <li>Limited to internal access</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="success-note">
                <strong>Cloud Provider Integration:</strong> Cloud Control Manager handles LoadBalancer provisioning automatically on AWS, Azure, GCP.
            </div>
        </div>

        <div class="section">
            <h2>üîç Service Discovery Demonstration</h2>
            
            <div class="important-note">
                Service Discovery relies on <strong>labels and selectors</strong> to find target pods dynamically.
            </div>

            <h3>Break Service Discovery (Intentionally)</h3>
            <div class="command-block">
<span class="prompt">$</span> kubectl edit service python-django-app-service
<span class="comment"># Change selector from 'sample-python-app' to 'sample-python-ap'</span>

<span class="prompt">$</span> curl -L http://&lt;minikube-ip&gt;:30007/demo
<span class="comment"># This will FAIL - service can't find pods!</span>
</div>

            <div class="architecture-diagram">
                <h4>üîç Service Discovery: Labels and Selectors</h4>
                
                <div style="margin-bottom: 25px;">
                    <div style="background: #e8f5e8; border: 2px solid #4caf50; border-radius: 15px; padding: 20px; margin: 10px 0;">
                        <h5 style="color: #2e7d32; margin-top: 0;">‚úÖ Working Configuration</h5>
                        <div style="display: flex; justify-content: space-around; align-items: center; flex-wrap: wrap;">
                            <div style="background: linear-gradient(135deg, #FF9800, #f57c00); color: white; padding: 15px; border-radius: 15px; margin: 10px; min-width: 140px; text-align: center; border: 3px solid #e65100;">
                                <div style="font-size: 1.5em; margin-bottom: 8px;">üåê</div>
                                <div><strong>Service Selector</strong></div>
                                <div style="background: rgba(255,255,255,0.2); padding: 5px; border-radius: 5px; margin-top: 8px; font-family: monospace;">
                                    app: sample-python-app
                                </div>
                            </div>
                            
                            <div style="font-size: 2em; color: #4caf50;">‚úÖ</div>
                            
                            <div style="display: flex; gap: 15px;">
                                <div style="background: linear-gradient(135deg, #4CAF50, #45a049); color: white; padding: 15px; border-radius: 15px; text-align: center; border: 3px solid #388e3c;">
                                    <div style="font-size: 1.2em; margin-bottom: 5px;">üöÄ</div>
                                    <div><strong>Pod 1</strong></div>
                                    <div style="background: rgba(255,255,255,0.2); padding: 3px; border-radius: 3px; margin-top: 5px; font-family: monospace; font-size: 0.8em;">
                                        app: sample-python-app
                                    </div>
                                </div>
                                <div style="background: linear-gradient(135deg, #4CAF50, #45a049); color: white; padding: 15px; border-radius: 15px; text-align: center; border: 3px solid #388e3c;">
                                    <div style="font-size: 1.2em; margin-bottom: 5px;">üöÄ</div>
                                    <div><strong>Pod 2</strong></div>
                                    <div style="background: rgba(255,255,255,0.2); padding: 3px; border-radius: 3px; margin-top: 5px; font-family: monospace; font-size: 0.8em;">
                                        app: sample-python-app
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div style="text-align: center; margin-top: 15px; color: #2e7d32; font-weight: bold;">
                            üéØ Result: Service finds pods ‚ûú Traffic flows successfully
                        </div>
                    </div>
                </div>
                
                <div style="margin-bottom: 25px;">
                    <div style="background: #ffebee; border: 2px solid #f44336; border-radius: 15px; padding: 20px; margin: 10px 0;">
                        <h5 style="color: #d32f2f; margin-top: 0;">‚ùå Broken Configuration</h5>
                        <div style="display: flex; justify-content: space-around; align-items: center; flex-wrap: wrap;">
                            <div style="background: linear-gradient(135deg, #f44336, #d32f2f); color: white; padding: 15px; border-radius: 15px; margin: 10px; min-width: 140px; text-align: center; border: 3px solid #b71c1c;">
                                <div style="font-size: 1.5em; margin-bottom: 8px;">üåê</div>
                                <div><strong>Service Selector</strong></div>
                                <div style="background: rgba(255,255,255,0.2); padding: 5px; border-radius: 5px; margin-top: 8px; font-family: monospace;">
                                    app: sample-python-ap
                                </div>
                                <div style="font-size: 0.8em; margin-top: 5px;">‚ö†Ô∏è Missing 'p'!</div>
                            </div>
                            
                            <div style="font-size: 2em; color: #f44336;">‚ùå</div>
                            
                            <div style="display: flex; gap: 15px;">
                                <div style="background: linear-gradient(135deg, #9E9E9E, #757575); color: white; padding: 15px; border-radius: 15px; text-align: center; border: 3px solid #424242;">
                                    <div style="font-size: 1.2em; margin-bottom: 5px;">üöÄ</div>
                                    <div><strong>Pod 1</strong></div>
                                    <div style="background: rgba(255,255,255,0.2); padding: 3px; border-radius: 3px; margin-top: 5px; font-family: monospace; font-size: 0.8em;">
                                        app: sample-python-app
                                    </div>
                                </div>
                                <div style="background: linear-gradient(135deg, #9E9E9E, #757575); color: white; padding: 15px; border-radius: 15px; text-align: center; border: 3px solid #424242;">
                                    <div style="font-size: 1.2em; margin-bottom: 5px;">üöÄ</div>
                                    <div><strong>Pod 2</strong></div>
                                    <div style="background: rgba(255,255,255,0.2); padding: 3px; border-radius: 3px; margin-top: 5px; font-family: monospace; font-size: 0.8em;">
                                        app: sample-python-app
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div style="text-align: center; margin-top: 15px; color: #d32f2f; font-weight: bold;">
                            ‚ùå Result: Service can't find pods ‚ûú Traffic fails with timeout
                        </div>
                    </div>
                </div>
                
                <div style="background: #fff3cd; border: 2px solid #ffc107; border-radius: 10px; padding: 15px;">
                    <div style="font-weight: bold; color: #856404; margin-bottom: 10px;">üîë Key Takeaway:</div>
                    <div style="color: #856404;">
                        Service discovery is <strong>100% dependent</strong> on exact label matching. Even a single character difference breaks the connection!
                    </div>
                </div>
            </div>

            <h3>Fix Service Discovery</h3>
            <div class="command-block">
<span class="prompt">$</span> kubectl edit service python-django-app-service
<span class="comment"># Change selector back to 'sample-python-app'</span>

<span class="prompt">$</span> curl -L http://&lt;minikube-ip&gt;:30007/demo
<span class="comment"># Now it works! Service found the pods</span>
</div>

            <div class="architecture-diagram">
                <h4>‚úÖ Service Discovery Fixed</h4>
                <div style="display: flex; justify-content: space-around; align-items: center; flex-wrap: wrap;">
                    <div style="background: linear-gradient(135deg, #4CAF50, #45a049); color: white; padding: 20px; border-radius: 15px; margin: 15px; min-width: 160px; text-align: center; border: 3px solid #388e3c; box-shadow: 0 6px 20px rgba(76, 175, 80, 0.3);">
                        <div style="font-size: 2em; margin-bottom: 10px;">üåê</div>
                        <div><strong>Service Selector</strong></div>
                        <div style="background: rgba(255,255,255,0.25); padding: 8px; border-radius: 8px; margin-top: 10px; font-family: monospace; font-weight: bold;">
                            app: sample-python-app
                        </div>
                        <div style="font-size: 0.9em; margin-top: 8px; opacity: 0.9;">‚úÖ Corrected!</div>
                    </div>
                    
                    <div style="display: flex; flex-direction: column; align-items: center; margin: 15px;">
                        <div style="font-size: 2.5em; color: #4CAF50; text-shadow: 0 0 10px rgba(76, 175, 80, 0.3);">‚úÖ</div>
                        <div style="font-size: 0.9em; color: #4CAF50; font-weight: bold; margin-top: 5px;">MATCHES</div>
                    </div>
                    
                    <div style="display: flex; gap: 20px;">
                        <div style="background: linear-gradient(135deg, #4CAF50, #45a049); color: white; padding: 18px; border-radius: 15px; text-align: center; border: 3px solid #388e3c; box-shadow: 0 6px 20px rgba(76, 175, 80, 0.3);">
                            <div style="font-size: 1.5em; margin-bottom: 8px;">üöÄ</div>
                            <div><strong>Pod 1</strong></div>
                            <div style="font-size: 0.8em; margin: 5px 0;">IP: 172.17.0.5</div>
                            <div style="background: rgba(255,255,255,0.25); padding: 5px; border-radius: 5px; margin-top: 8px; font-family: monospace; font-size: 0.8em;">
                                app: sample-python-app
                            </div>
                        </div>
                        <div style="background: linear-gradient(135deg, #4CAF50, #45a049); color: white; padding: 18px; border-radius: 15px; text-align: center; border: 3px solid #388e3c; box-shadow: 0 6px 20px rgba(76, 175, 80, 0.3);">
                            <div style="font-size: 1.5em; margin-bottom: 8px;">üöÄ</div>
                            <div><strong>Pod 2</strong></div>
                            <div style="font-size: 0.8em; margin: 5px 0;">IP: 172.17.0.7</div>
                            <div style="background: rgba(255,255,255,0.25); padding: 5px; border-radius: 5px; margin-top: 8px; font-family: monospace; font-size: 0.8em;">
                                app: sample-python-app
                            </div>
                        </div>
                    </div>
                </div>
                
                <div style="background: #e8f5e8; border: 2px solid #4caf50; border-radius: 10px; padding: 20px; margin-top: 20px;">
                    <div style="text-align: center;">
                        <div style="font-size: 1.5em; color: #2e7d32; margin-bottom: 10px;">üéâ Success!</div>
                        <div style="color: #2e7d32; font-weight: bold; margin-bottom: 10px;">Service Discovery Working Again</div>
                        <div style="background: #1e1e1e; color: #00ff00; padding: 10px; border-radius: 8px; font-family: monospace; display: inline-block;">
                            curl -L http://&lt;minikube-ip&gt;:30007/demo
                            <br><span style="color: #ffff00;"># Response: 200 OK - Application accessible! ‚úÖ</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>‚öñÔ∏è Load Balancing with Cube Shark</h2>
            
            <div class="cubeshark-demo">
                <h4>ü¶à Cube Shark - Traffic Visualization Tool</h4>
                <p>Cube Shark helps visualize traffic flow within Kubernetes clusters</p>
            </div>

            <h3>Install and Run Cube Shark</h3>
            <div class="command-block">
<span class="prompt">$</span> curl -Lo kubeshark https://github.com/kubeshark/kubeshark/releases/latest/download/kubeshark_linux_amd64 && chmod +x kubeshark
<span class="comment"># Download Cube Shark (adjust for your OS)</span>

<span class="prompt">$</span> ./kubeshark tap -a
<span class="comment"># Start traffic capture (-a for all namespaces)</span>
<span class="comment"># Opens browser at localhost:8899</span>
</div>

            <h3>Generate Load Balanced Traffic</h3>
            <div class="command-block">
<span class="prompt">$</span> for i in {1..6}; do curl http://&lt;minikube-ip&gt;:30007/demo; done
<span class="comment"># Send 6 requests to see load balancing</span>
</div>

            <div class="architecture-diagram">
                <h4>üîÑ Load Balancing Visualization</h4>
                <div style="display: grid; grid-template-columns: 1fr auto 1fr; align-items: center; gap: 30px; padding: 20px;">
                    <div style="text-align: center;">
                        <div style="background: linear-gradient(135deg, #2196F3, #1976D2); color: white; padding: 20px; border-radius: 50%; width: 100px; height: 100px; display: flex; align-items: center; justify-content: center; margin: 0 auto 15px; font-size: 2em; box-shadow: 0 6px 20px rgba(33, 150, 243, 0.4);">
                            üåê
                        </div>
                        <div style="font-weight: bold; font-size: 1.1em;">Service</div>
                        <div style="font-size: 0.9em; margin-top: 5px;">python-django-app-service</div>
                        <div style="font-size: 0.8em; color: #666; margin-top: 5px;">Selector: app=sample-python-app</div>
                    </div>
                    
                    <div style="display: flex; flex-direction: column; align-items: center;">
                        <div style="font-size: 1.5em; margin: 5px;">‚¨áÔ∏è</div>
                        <div style="font-size: 0.9em; color: #666;">Load Balance</div>
                        <div style="font-size: 1.5em; margin: 5px;">‚¨áÔ∏è</div>
                    </div>
                    
                    <div style="display: flex; flex-direction: column; gap: 15px;">
                        <div class="pod" style="margin: 0; display: flex; align-items: center; justify-content: center; min-height: 60px;">
                            <div>
                                <div><strong>Pod 1</strong></div>
                                <div style="font-size: 0.9em;">IP: 172.17.0.5:8000</div>
                            </div>
                        </div>
                        <div class="pod" style="margin: 0; display: flex; align-items: center; justify-content: center; min-height: 60px;">
                            <div>
                                <div><strong>Pod 2</strong></div>
                                <div style="font-size: 0.9em;">IP: 172.17.0.7:8000</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div style="display: flex; justify-content: space-around; margin-top: 25px; gap: 15px;">
                    <div style="background: #e3f2fd; padding: 15px; border-radius: 10px; border-left: 4px solid #2196f3; flex: 1;">
                        <div style="font-weight: bold; color: #1976d2;">Request 1, 3, 5</div>
                        <div style="font-size: 0.9em;">‚Üí Pod 1 (172.17.0.5)</div>
                    </div>
                    <div style="background: #e8f5e8; padding: 15px; border-radius: 10px; border-left: 4px solid #4caf50; flex: 1;">
                        <div style="font-weight: bold; color: #2e7d32;">Request 2, 4, 6</div>
                        <div style="font-size: 0.9em;">‚Üí Pod 2 (172.17.0.7)</div>
                    </div>
                </div>
                
                <div style="background: rgba(255,255,255,0.9); padding: 15px; border-radius: 10px; margin-top: 20px; border: 2px solid #4caf50;">
                    <div style="font-weight: bold; color: #2e7d32; margin-bottom: 10px;">ü¶à Cube Shark Shows:</div>
                    <ul style="margin: 0; padding-left: 20px; color: #333;">
                        <li>Requests alternating between different Pod IPs</li>
                        <li>Visual confirmation of load balancing in action</li>
                        <li>Network packet flow through the cluster</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>üéØ Advanced kubectl Commands</h2>
            
            <h3>Verbose API Interaction</h3>
            <div class="command-block">
<span class="prompt">$</span> kubectl get pods -v=7
<span class="comment"># Shows API server connections and HTTP requests</span>

<span class="prompt">$</span> kubectl get pods -v=9
<span class="comment"># Maximum verbosity - shows JSON payloads</span>
</div>

            <h3>Useful Debugging Commands</h3>
            <div class="command-block">
<span class="prompt">$</span> kubectl describe service python-django-app-service
<span class="comment"># Detailed service information</span>

<span class="prompt">$</span> kubectl describe pod &lt;pod-name&gt;
<span class="comment"># Detailed pod information</span>

<span class="prompt">$</span> kubectl logs &lt;pod-name&gt;
<span class="comment"># View pod logs</span>

<span class="prompt">$</span> kubectl get endpoints
<span class="comment"># See which pods service is routing to</span>
</div>
        </div>

        <div class="section">
            <h2>üìö Summary and Key Takeaways</h2>
            
            <div class="architecture-diagram">
                <h4>üéØ Kubernetes Services - Three Main Capabilities</h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 20px 0;">
                    <div style="background: #E3F2FD; padding: 20px; border-radius: 10px; border-left: 5px solid #2196F3;">
                        <h4>üåê Exposing Applications</h4>
                        <ul>
                            <li><strong>NodePort:</strong> Internal access via Node IP</li>
                            <li><strong>LoadBalancer:</strong> External access via public IP</li>
                            <li>Makes pods accessible beyond cluster network</li>
                        </ul>
                    </div>
                    <div style="background: #E8F5E8; padding: 20px; border-radius: 10px; border-left: 5px solid #4CAF50;">
                        <h4>üîç Service Discovery</h4>
                        <ul>
                            <li>Uses <strong>labels and selectors</strong></li>
                            <li>Handles dynamic Pod IP changes</li>
                            <li>Automatically finds healthy pods</li>
                        </ul>
                    </div>
                    <div style="background: #FFF3E0; padding: 20px; border-radius: 10px; border-left: 5px solid #FF9800;">
                        <h4>‚öñÔ∏è Load Balancing</h4>
                        <ul>
                            <li>Distributes traffic across multiple pods</li>
                            <li>Improves application availability</li>
                            <li>Prevents single pod overload</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="important-note">
                <strong>Tools Used:</strong>
                <ul style="margin-top: 10px;">
                    <li><strong>Cube Shark:</strong> Traffic visualization and analysis</li>
                    <li><strong>minikube:</strong> Local Kubernetes development</li>
                    <li><strong>kubectl:</strong> Kubernetes CLI tool</li>
                </ul>
            </div>

            <div class="success-note">
                <strong>Best Practices Learned:</strong>
                <ul style="margin-top: 10px;">
                    <li>Always use Services instead of direct Pod access</li>
                    <li>Label consistency between Deployments and Services is critical</li>
                    <li>Use appropriate Service types based on access requirements</li>
                    <li>Monitor traffic flow with tools like Cube Shark</li>
                </ul>
            </div>
        </div>

        <button class="collapsible">üîß Quick Reference Commands</button>
        <div class="collapsible-content">
            <div class="command-block">
<span class="comment"># Cluster Management</span>
<span class="prompt">$</span> minikube status
<span class="prompt">$</span> kubectl get all
<span class="prompt">$</span> kubectl get pods -o wide

<span class="comment"># Deployments</span>
<span class="prompt">$</span> kubectl apply -f deployment.yaml
<span class="prompt">$</span> kubectl get deploy
<span class="prompt">$</span> kubectl delete deploy &lt;name&gt;

<span class="comment"># Services</span>
<span class="prompt">$</span> kubectl apply -f service.yaml
<span class="prompt">$</span> kubectl get svc
<span class="prompt">$</span> kubectl edit service &lt;name&gt;
<span class="prompt">$</span> kubectl describe service &lt;name&gt;

<span class="comment"># Access</span>
<span class="prompt">$</span> minikube ip
<span class="prompt">$</span> curl -L http://&lt;node-ip&gt;:&lt;nodeport&gt;/demo

<span class="comment"># Cube Shark</span>
<span class="prompt">$</span> ./kubeshark tap -a
<span class="comment"># Browser: localhost:8899</span>
</div>
        </div>

        <button class="collapsible">üìã YAML Templates</button>
        <div class="collapsible-content">
            <h4>Deployment Template</h4>
            <div class="yaml-block">
<span class="key">apiVersion:</span> <span class="value">apps/v1</span>
<span class="key">kind:</span> <span class="value">Deployment</span>
<span class="key">metadata:</span>
<span class="indent">  </span><span class="key">name:</span> <span class="value">sample-python-app</span>
<span class="key">spec:</span>
<span class="indent">  </span><span class="key">replicas:</span> <span class="value">2</span>
<span class="indent">  </span><span class="key">selector:</span>
<span class="indent">    </span><span class="key">matchLabels:</span>
<span class="indent">      </span><span class="key">app:</span> <span class="value">sample-python-app</span>
<span class="indent">  </span><span class="key">template:</span>
<span class="indent">    </span><span class="key">metadata:</span>
<span class="indent">      </span><span class="key">labels:</span>
<span class="indent">        </span><span class="key">app:</span> <span class="value">sample-python-app</span>
<span class="indent">    </span><span class="key">spec:</span>
<span class="indent">      </span><span class="key">containers:</span>
<span class="indent">      - </span><span class="key">name:</span> <span class="value">python-app</span>
<span class="indent">        </span><span class="key">image:</span> <span class="value">python-sample-application-demo:V1</span>
<span class="indent">        </span><span class="key">ports:</span>
<span class="indent">        - </span><span class="key">containerPort:</span> <span class="value">8000</span>
</div>

            <h4>Service Template</h4>
            <div class="yaml-block">
<span class="key">apiVersion:</span> <span class="value">v1</span>
<span class="key">kind:</span> <span class="value">Service</span>
<span class="key">metadata:</span>
<span class="indent">  </span><span class="key">name:</span> <span class="value">python-django-app-service</span>
<span class="key">spec:</span>
<span class="indent">  </span><span class="key">type:</span> <span class="value">NodePort</span> <span class="comment"># or LoadBalancer</span>
<span class="indent">  </span><span class="key">selector:</span>
<span class="indent">    </span><span class="key">app:</span> <span class="value">sample-python-app</span>
<span class="indent">  </span><span class="key">ports:</span>
<span class="indent">  - </span><span class="key">port:</span> <span class="value">80</span>
<span class="indent">    </span><span class="key">targetPort:</span> <span class="value">8000</span>
<span class="indent">    </span><span class="key">nodePort:</span> <span class="value">30007</span>
</div>
        </div>
    </div>

    <script>
        // Collapsible functionality
        var coll = document.getElementsByClassName("collapsible");
        var i;

        for (i = 0; i < coll.length; i++) {
            coll[i].addEventListener("click", function() {
                this.classList.toggle("active");
                var content = this.nextElementSibling;
                if (content.style.display === "block") {
                    content.style.display = "none";
                    content.classList.remove("active");
                } else {
                    content.style.display = "block";
                    content.classList.add("active");
                }
            });
        }

        // Add some interactive highlighting on hover
        document.querySelectorAll('.flow-step').forEach(function(element) {
            element.addEventListener('mouseenter', function() {
                this.style.transform = 'scale(1.05)';
                this.style.transition = 'transform 0.3s ease';
            });
            
            element.addEventListener('mouseleave', function() {
                this.style.transform = 'scale(1)';
            });
        });
    </script>
</body>
</html>